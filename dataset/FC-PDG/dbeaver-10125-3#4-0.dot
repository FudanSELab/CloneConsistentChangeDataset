digraph {
0 [style = filled, label = "final DragSource source = new DragSource(dndControl,operations)@@@5@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
3 [style = filled, label = "addDragAndDropSupport['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
11 [style = filled, label = "DropTarget dropTarget = new DropTarget(this,operations)@@@112@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
13 [style = filled, label = "dropTarget.addDropListener(new DropTargetListener(){@Override public void dragEnter(DropTargetEvent event){handleDragEvent(event)}@Override public void dragLeave(DropTargetEvent event){handleDragEvent(event)}@Override public void dragOperationChanged(DropTargetEvent event){handleDragEvent(event)}@Override public void dragOver(DropTargetEvent event){handleDragEvent(event)}@Override public void drop(DropTargetEvent event){handleDragEvent(event)if (event.detail == DND.DROP_MOVE) {moveColumns(event)}}@Override public void dropAccept(DropTargetEvent event){handleDragEvent(event)}private void handleDragEvent(DropTargetEvent event){if (!isDropSupported(event)) {event.detail = DND.DROP_NONE}{event.detail = DND.DROP_MOVE}event.feedback = DND.FEEDBACK_SELECT}private boolean isDropSupported(DropTargetEvent event){if (!hoveringOnHeaderDragArea) {return false}if (draggingColumn == null || draggingColumn.getGrid() != this) {return false}GridColumn overColumn = getOverColumn(event)return draggingColumn != overColumn}private GridColumn getOverColumn(DropTargetEvent event){Point dragPoint = getDisplay().map(null,this,new Point(event.x,event.y))return getColumn(dragPoint)}private void moveColumns(DropTargetEvent event){GridColumn overColumn = getOverColumn(event)if (draggingColumn == null || draggingColumn == overColumn) {return}IGridController gridController = getGridController()if (gridController != null) {IGridController.DropLocation locationPoint dropPoint = getDisplay().map(null,this,new Point(event.x,event.y))Rectangle columnBounds = overColumn.getBounds()if (dropPoint.x > columnBounds.x + columnBounds.width / 2) {location = IGridController.DropLocation.DROP_AFTER}{location = IGridController.DropLocation.DROP_BEFORE}gridController.moveColumn(draggingColumn.getElement(),overColumn.getElement(),location)}draggingColumn = null}})@@@114@@@['0', '0', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB3BBB"];
14 [style = filled, label = "final int operations = DND.DROP_MOVE | DND.DROP_COPY@@@3@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
4 [style = filled, label = "Label dndControl = item.getTitleLabel()@@@3@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
6 [style = filled, label = "DashboardItem item@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
17 [style = filled, label = "source.addDragListener(new DragSourceListener(){@Override public void dragStart(DragSourceEvent event){if (lastDragEndTime > 0 && System.currentTimeMillis() - lastDragEndTime < 100) {event.doit = false}{Rectangle columnBoundsif (headerColumnDragStarted && hoveringColumn != null) {draggingColumn = hoveringColumncolumnBounds = hoveringColumn.getBounds()}if (rowHeaderDragStarted && hoveringRow != null) {draggingRow = hoveringRowint rowFromTop = hoveringRow - getTopIndex()columnBounds = new Rectangle(0,rowFromTop * getItemHeight(),getRowHeaderWidth(),getItemHeight())}{event.doit = falsereturn}GC gc = new GC(this)dragImage = new Image(Display.getCurrent(),columnBounds.width,columnBounds.height)gc.copyArea(dragImage,columnBounds.x,columnBounds.y)event.image = dragImagegc.dispose()}}@Override public void dragSetData(DragSourceEvent event){if (draggingColumn != null) {if (GridColumnTransfer.INSTANCE.isSupportedType(event.dataType)) {List<Object> elements = new ArrayList<>()if (isDragSingleColumn()) {elements.add(draggingColumn.getElement())}{for (GridColumn col : selectedColumns){elements.add(col.getElement())}}event.data = elements}if (TextTransfer.getInstance().isSupportedType(event.dataType)) {if (selectedColumns.size() > 1 && !isDragSingleColumn()) {StringBuilder text = new StringBuilder()for (GridColumn column : selectedColumns){if (text.length() > 0) text.append(\", \")text.append(getLabelProvider().getText(column.getElement()))}event.data = text.toString()}{event.data = getLabelProvider().getText(draggingColumn.getElement())}}}if (draggingRow != null) {if (GridColumnTransfer.INSTANCE.isSupportedType(event.dataType)) {List<Object> elements = new ArrayList<>()if (isDragSingleRow()) {elements.add(getRowElement(draggingRow))}{for (Integer row : selectedRows.keySet()){elements.add(getRowElement(row))}}event.data = elements}if (TextTransfer.getInstance().isSupportedType(event.dataType)) {List<GridColumn> columns = selectedColumnsif (columns.isEmpty()) {columns = this.columns}Set<Integer> rows = selectedRows.keySet()if (rows.isEmpty()) {rows = Collections.singleton(draggingRow)}StringBuilder text = new StringBuilder()for (Integer row : rows){if (text.length() > 0) text.append(\"\")for (int i = 0 i < columns.size() i++){GridColumn column = columns.get(i)String cellText = getContentProvider().getCellText(column.getElement(),getRowElement(row))if (i > 0) text.append(\", \")text.append(cellText)}}event.data = text.toString()}}}@Override public void dragFinished(DragSourceEvent event){draggingColumn = nulldraggingRow = nullif (dragImage != null) {UIUtils.dispose(dragImage)dragImage = null}lastDragEndTime = System.currentTimeMillis()}})@@@6@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
2 [style = filled, label = "source.setTransfer(DashboardTransfer.INSTANCE)@@@6@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
15 [style = filled, label = "dropTarget.setTransfer(GridColumnTransfer.INSTANCE,TextTransfer.getInstance())@@@113@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
5 [style = filled, label = "final DragSource source = new DragSource(this,operations)@@@4@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
9 [style = filled, label = "DropTarget dropTarget = new DropTarget(dndControl,operations)@@@39@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
8 [style = filled, label = "source.addDragListener(new DragSourceListener(){@Override public void dragStart(DragSourceEvent event){if (selectedItem == null || lastDragEndTime > 0 && System.currentTimeMillis() - lastDragEndTime < 100) {event.doit = false}{Rectangle columnBounds = selectedItem.getBounds()GC gc = new GC(this)dragImage = new Image(Display.getCurrent(),columnBounds.width,columnBounds.height)gc.copyArea(dragImage,columnBounds.x,columnBounds.y)event.image = dragImagegc.dispose()}}@Override public void dragSetData(DragSourceEvent event){if (selectedItem != null) {if (DashboardTransfer.INSTANCE.isSupportedType(event.dataType)) {event.data = selectedItem}}}@Override public void dragFinished(DragSourceEvent event){if (dragImage != null) {UIUtils.dispose(dragImage)dragImage = null}lastDragEndTime = System.currentTimeMillis()}})@@@7@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
12 [style = filled, label = "addDragAndDropSupport['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
10 [style = filled, label = "addDragAndDropSupport['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
7 [style = filled, label = "dropTarget.addDropListener(new DropTargetListener(){@Override public void dragEnter(DropTargetEvent event){handleDragEvent(event)}@Override public void dragLeave(DropTargetEvent event){handleDragEvent(event)}@Override public void dragOperationChanged(DropTargetEvent event){handleDragEvent(event)}@Override public void dragOver(DropTargetEvent event){handleDragEvent(event)}@Override public void drop(DropTargetEvent event){handleDragEvent(event)if (event.detail == DND.DROP_MOVE) {moveDashboard(event)}}@Override public void dropAccept(DropTargetEvent event){handleDragEvent(event)}private void handleDragEvent(DropTargetEvent event){if (!isDropSupported(event)) {event.detail = DND.DROP_NONE}{event.detail = DND.DROP_MOVE}event.feedback = DND.FEEDBACK_SELECT}private boolean isDropSupported(DropTargetEvent event){DashboardItem overItem = getOverItem(event)if (selectedItem == null || overItem == null) {return false}return overItem != selectedItem}private void moveDashboard(DropTargetEvent event){DashboardItem overItem = getOverItem(event)if (selectedItem == null || overItem == null || selectedItem == overItem) {return}List<DashboardItem> newList = new ArrayList<>(items)int newIndex = newList.indexOf(overItem)newList.remove(selectedItem)newList.add(newIndex,selectedItem)DashboardViewConfiguration viewConfiguration = viewContainer.getViewConfiguration()this.setRedraw(false)try {for (DashboardItem item : items.toArray(new DashboardItem(((()){item.dispose()}for (DashboardItem oldItem : newList){DashboardItem newItem = new DashboardItem(this,oldItem.getDashboardId())newItem.copyFrom(oldItem)}}{this.layout(true,true)this.setRedraw(true)}viewConfiguration.saveSettings()}private DashboardItem getOverItem(DropTargetEvent event){Object source = event.getSource()if (source instanceof DropTarget) {Control control = ((DropTarget)source).getControl()for (Composite parent = control.getParent() parent != null parent = parent.getParent()){if (parent instanceof DashboardItem) {return (DashboardItem)parent}}}return null}})@@@41@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
16 [style = filled, label = "source.setTransfer(GridColumnTransfer.INSTANCE,TextTransfer.getInstance())@@@5@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
1 [style = filled, label = "dropTarget.setTransfer(DashboardTransfer.INSTANCE,TextTransfer.getInstance())@@@40@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
14->5 [style = bold, label=""];
9->11 [style = dashed, label="0"];
8->9 [style = bold, label=""];
4->9 [style = solid, label="dndControl"];
5->0 [style = solid, label="operations"];
12->14 [style = bold, label=""];
4->5 [style = bold, label=""];
4->0 [style = solid, label="dndControl"];
11->15 [style = bold, label=""];
5->9 [style = solid, label="operations"];
0->5 [style = dashed, label="0"];
2->8 [style = bold, label=""];
2->16 [style = dashed, label="0"];
5->0 [style = bold, label=""];
10->4 [style = bold, label=""];
17->13 [style = solid, label="draggingColumn"];
3->6 [style = dotted, label="true"];
15->13 [style = bold, label=""];
17->11 [style = bold, label=""];
1->15 [style = dashed, label="0"];
10->6 [style = dotted, label="true"];
16->17 [style = bold, label=""];
0->2 [style = bold, label=""];
1->7 [style = bold, label=""];
14->5 [style = solid, label="operations"];
9->1 [style = bold, label=""];
14->11 [style = solid, label="operations"];
5->16 [style = bold, label=""];
3->4 [style = bold, label=""];
0->7 [style = solid, label="source"];
}
