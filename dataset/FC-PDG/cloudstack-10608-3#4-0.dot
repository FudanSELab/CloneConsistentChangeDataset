digraph {
52 [style = filled, label = "publicIps@@@38@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
45 [style = filled, label = "final NicProfile profile = new NicProfile(nic,network,nic.getBroadcastUri(),nic.getIsolationUri(),networkRate,_networkModel.isSecurityGroupSupportedInNetwork(network),_networkModel.getNetworkTag(vm.getHypervisorType(),network))@@@13@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
32 [style = filled, label = "final NetworkVO network = _networksDao.findById(ntwkId)@@@45@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
13 [style = filled, label = "network.getTrafficType().equals(TrafficType.Guest) && network.getGuestType().equals(GuestType.Isolated)@@@8@@@['1', '1', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
46 [style = filled, label = "profile.setIsolationUri(Networks.IsolationType.Vlan.toUri(publicIp.getVlanTag()))@@@57@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
41 [style = filled, label = "profile.setName(_networkModel.getNetworkTag(vm.getHypervisorType(),network))@@@59@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
18 [style = filled, label = "final DeployDestination dest@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
14 [style = filled, label = "final Integer networkRate = _networkModel.getNetworkRate(network.getId(),vm.getId())@@@11@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
1 [style = filled, label = "s_logger.error(\"NetworkElement \" + element + \" prepareForMigration failed.\")@@@30@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
12 [style = filled, label = "final NetworkVO network = _networksDao.findById(nic.getNetworkId())@@@7@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
47 [style = filled, label = "s_logger.debug(\"Creating nic profile for migration. BroadcastUri: \" + broadcastUri.toString() + \" NetworkId: \" + ntwkId + \" Vm: \" + vm.getId())@@@44@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
68 [style = filled, label = "final List<String> addedURIs = new ArrayList<String>()@@@35@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
43 [style = filled, label = "guestNetworkId = network.getId()@@@9@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
2 [style = filled, label = "prepareNicForMigration['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
44 [style = filled, label = "providersToImplement.contains(element.getProvider())@@@21@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
55 [style = filled, label = "final long ntwkId = publicIp.getNetworkId()@@@41@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
23 [style = filled, label = "!((NetworkMigrationResponder)element).prepareMigration(profile,network,vm,dest,context)@@@29@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
62 [style = filled, label = "final NetworkGuru guru = AdapterBase.getAdapterByName(networkGurus,network.getGuruName())@@@12@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
33 [style = filled, label = "final NetworkGuru guru = AdapterBase.getAdapterByName(networkGurus,network.getGuruName())@@@47@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
66 [style = filled, label = "profile.setIPv4Gateway(publicIp.getGateway())@@@52@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
28 [style = filled, label = "final DeployDestination dest@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
59 [style = filled, label = "profile.setSecurityGroupEnabled(_networkModel.isSecurityGroupSupportedInNetwork(network))@@@58@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
65 [style = filled, label = "profile.setBroadcastUri(broadcastUri)@@@56@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
36 [style = filled, label = "!_networkModel.isProviderEnabledInPhysicalNetwork(_networkModel.getPhysicalNetworkId(network),element.getProvider().getName())@@@22@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
38 [style = filled, label = "nic == null && !addedURIs.contains(broadcastUri.toString())@@@43@@@['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
3 [style = filled, label = "prepareAllNicsForMigration(vm,dest)@@@4@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
53 [style = filled, label = "profile.setIPv4Address(userIp.getAddress().toString())@@@50@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
63 [style = filled, label = "final URI broadcastUri = BroadcastDomainType.Vlan.toUri(publicIp.getVlanTag())@@@40@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
30 [style = filled, label = "profile.setDeviceId(255)@@@49@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
60 [style = filled, label = "final ReservationContext context = new ReservationContextImpl(UUID.randomUUID().toString(),null,null)@@@4@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
24 [style = filled, label = "final VirtualMachineProfile vm@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
20 [style = filled, label = "final DeployDestination dest@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
17 [style = filled, label = "!((NetworkMigrationResponder)element).prepareMigration(profile,network,vm,dest,context)@@@26@@@['1', '1', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
57 [style = filled, label = "final List<Provider> providersToImplement = getNetworkProviders(network.getId())@@@19@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
6 [style = filled, label = "s_logger.error(\"NetworkGuru \" + guru + \" prepareForMigration failed.\")@@@16@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
34 [style = filled, label = "guru instanceof NetworkMigrationResponder@@@14@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
64 [style = filled, label = "profile.setNetworId(network.getId())@@@60@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
9 [style = filled, label = "element instanceof NetworkMigrationResponder@@@28@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
16 [style = filled, label = "vm.getType().equals(VirtualMachine.Type.DomainRouter) && (vm.getHypervisorType().equals(HypervisorType.KVM) || vm.getHypervisorType().equals(HypervisorType.VMware))@@@3@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
27 [style = filled, label = "network.getGuestType() == Network.GuestType.L2 && vm.getType() == VirtualMachine.Type.User@@@19@@@['0', '1', '0']", fillcolor = white, shape = diamond image = "AAA1AAABBB2BBB"];
37 [style = filled, label = "final PublicIp publicIp = PublicIp.createFromAddrAndVlan(userIp,_vlanDao.findById(userIp.getVlanId()))@@@39@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
49 [style = filled, label = "final VirtualMachineProfile vm@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
21 [style = filled, label = "guestNetworkId != null@@@36@@@['1', '1', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
61 [style = filled, label = "profile.setMacAddress(publicIp.getMacAddress())@@@53@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
58 [style = filled, label = "_networkModel.getNetworkRate(network.getId(),vm.getId())@@@46@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
70 [style = filled, label = "prepareAllNicsForMigration['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
10 [style = filled, label = "!((NetworkMigrationResponder)guru).prepareMigration(profile,network,vm,dest,context)@@@15@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
19 [style = filled, label = "throw new CloudRuntimeException(\"Service provider \" + element.getProvider().getName() + \" either doesn't exist or is not enabled in physical network id: \" + network.getPhysicalNetworkId())@@@23@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
22 [style = filled, label = "element instanceof NetworkMigrationResponder@@@25@@@['1', '1', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
42 [style = filled, label = "guru.updateNicProfile(profile,network)@@@61@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
26 [style = filled, label = "prepareNicForMigration['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
51 [style = filled, label = "addedURIs.add(broadcastUri.toString())@@@63@@@['0', '0', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB3BBB"];
0 [style = filled, label = "!((NetworkMigrationResponder)guru).prepareMigration(profile,network,vm,dest,context)@@@15@@@['1', '1', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
11 [style = filled, label = "final List<IPAddressVO> publicIps = _ipAddressDao.listByAssociatedNetwork(guestNetworkId,null)@@@37@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
40 [style = filled, label = "profile.setTrafficType(network.getTrafficType())@@@55@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
54 [style = filled, label = "final List<NicVO> nics = _nicDao.listByVmId(vm.getId())@@@3@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
25 [style = filled, label = "_userVmMgr.setupVmForPvlan(false,vm.getVirtualMachine().getHostId(),profile)@@@20@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA1AAABBB2BBB"];
8 [style = filled, label = "guru instanceof NetworkMigrationResponder@@@14@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
39 [style = filled, label = "profile.setIPv4Netmask(publicIp.getNetmask())@@@51@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
48 [style = filled, label = "vm.addNic(profile)@@@33@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
56 [style = filled, label = "final IPAddressVO userIp@@@38@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
4 [style = filled, label = "final NicProfile profile = new NicProfile(nic,network,nic.getBroadcastUri(),nic.getIsolationUri(),networkRate,_networkModel.isSecurityGroupSupportedInNetwork(network),_networkModel.getNetworkTag(vm.getHypervisorType(),network))@@@13@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
15 [style = filled, label = "s_logger.error(\"NetworkElement \" + element + \" prepareForMigration failed.\")@@@27@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
31 [style = filled, label = "final Nic nic = _nicDao.findByNetworkIdInstanceIdAndBroadcastUri(ntwkId,vm.getId(),broadcastUri.toString())@@@42@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
35 [style = filled, label = "profile.setBroadcastType(network.getBroadcastDomainType())@@@54@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
29 [style = filled, label = "Long guestNetworkId = null@@@5@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
7 [style = filled, label = "return@@@5@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
50 [style = filled, label = "guru.updateNicProfile(profile,network)@@@32@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
67 [style = filled, label = "vm.addNic(profile)@@@62@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
69 [style = filled, label = "final NicProfile profile = new NicProfile()@@@48@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
5 [style = filled, label = "s_logger.error(\"NetworkGuru \" + guru + \" prepareForMigration failed.\")@@@16@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
38->59 [style = dotted, label="true"];
23->22 [style = bold, label=""];
70->28 [style = dotted, label="true"];
0->6 [style = dotted, label="true"];
38->47 [style = bold, label=""];
4->21 [style = solid, label="profile"];
70->49 [style = dotted, label="true"];
44->36 [style = dotted, label="true"];
41->64 [style = bold, label=""];
25->19 [style = bold, label=""];
17->50 [style = bold, label=""];
38->39 [style = dotted, label="true"];
38->65 [style = dotted, label="true"];
19->22 [style = bold, label=""];
20->3 [style = solid, label="vm"];
32->59 [style = solid, label="network"];
14->4 [style = solid, label="network"];
20->3 [style = solid, label="dest"];
14->0 [style = bold, label=""];
4->8 [style = bold, label=""];
6->57 [style = bold, label=""];
38->53 [style = dotted, label="true"];
3->7 [style = bold, label=""];
69->30 [style = bold, label=""];
44->22 [style = dotted, label="true"];
16->12 [style = bold, label=""];
43->14 [style = bold, label=""];
42->67 [style = bold, label=""];
17->15 [style = dotted, label="true"];
63->55 [style = bold, label=""];
31->38 [style = solid, label="nic"];
66->61 [style = bold, label=""];
59->41 [style = bold, label=""];
64->42 [style = bold, label=""];
39->66 [style = bold, label=""];
38->33 [style = dotted, label="true"];
29->12 [style = bold, label=""];
27->19 [style = bold, label=""];
22->50 [style = bold, label=""];
6->8 [style = solid, label="guru"];
21->11 [style = dotted, label="true"];
1->22 [style = bold, label=""];
20->49 [style = dashed, label="0"];
38->61 [style = dotted, label="true"];
37->63 [style = bold, label=""];
14->45 [style = solid, label="networkRate"];
10->5 [style = bold, label=""];
38->46 [style = dotted, label="true"];
16->3 [style = dotted, label="true"];
38->40 [style = dotted, label="true"];
35->40 [style = bold, label=""];
57->44 [style = bold, label=""];
15->9 [style = bold, label=""];
27->25 [style = bold, label=""];
26->16 [style = bold, label=""];
62->6 [style = solid, label="guru"];
21->37 [style = dotted, label="true"];
36->19 [style = bold, label=""];
51->37 [style = bold, label=""];
13->43 [style = dotted, label="true"];
60->29 [style = bold, label=""];
12->50 [style = solid, label="network"];
45->50 [style = solid, label="profile"];
47->32 [style = bold, label=""];
22->17 [style = bold, label=""];
6->5 [style = solid, label="guru"];
14->21 [style = solid, label="network"];
0->4 [style = solid, label="networkRate"];
32->41 [style = solid, label="network"];
13->43 [style = bold, label=""];
8->27 [style = bold, label=""];
12->13 [style = bold, label=""];
23->21 [style = bold, label=""];
7->12 [style = bold, label=""];
45->48 [style = solid, label="profile"];
21->56 [style = dotted, label="true"];
29->21 [style = solid, label="guestNetworkId"];
17->15 [style = bold, label=""];
48->12 [style = bold, label=""];
44->50 [style = bold, label=""];
38->64 [style = dotted, label="true"];
17->9 [style = bold, label=""];
5->27 [style = bold, label=""];
29->11 [style = solid, label="guestNetworkId"];
34->0 [style = dotted, label="true"];
8->34 [style = dashed, label="0"];
1->15 [style = dashed, label="0"];
2->16 [style = bold, label=""];
48->68 [style = bold, label=""];
46->59 [style = bold, label=""];
38->35 [style = dotted, label="true"];
11->37 [style = bold, label=""];
27->25 [style = dotted, label="true"];
22->21 [style = bold, label=""];
33->69 [style = bold, label=""];
22->17 [style = dotted, label="true"];
55->31 [style = bold, label=""];
8->10 [style = bold, label=""];
8->19 [style = bold, label=""];
9->23 [style = dotted, label="true"];
8->10 [style = dotted, label="true"];
0->6 [style = bold, label=""];
21->11 [style = bold, label=""];
21->38 [style = dotted, label="true"];
5->19 [style = bold, label=""];
69->42 [style = solid, label="profile"];
21->52 [style = dotted, label="true"];
6->4 [style = bold, label=""];
70->54 [style = bold, label=""];
5->6 [style = dashed, label="0"];
22->44 [style = bold, label=""];
38->37 [style = bold, label=""];
38->47 [style = dotted, label="true"];
38->30 [style = dotted, label="true"];
69->67 [style = solid, label="profile"];
16->7 [style = dotted, label="true"];
4->11 [style = solid, label="profile"];
11->14 [style = bold, label=""];
45->34 [style = bold, label=""];
15->44 [style = bold, label=""];
0->57 [style = bold, label=""];
17->44 [style = bold, label=""];
23->1 [style = dotted, label="true"];
24->3 [style = solid, label="vm"];
26->24 [style = dotted, label="true"];
2->18 [style = dotted, label="true"];
16->3 [style = bold, label=""];
32->58 [style = bold, label=""];
62->34 [style = solid, label="guru"];
61->35 [style = bold, label=""];
36->19 [style = dotted, label="true"];
63->65 [style = solid, label="broadcastUri"];
38->66 [style = dotted, label="true"];
10->0 [style = dashed, label="0"];
21->31 [style = dotted, label="true"];
38->42 [style = dotted, label="true"];
40->65 [style = bold, label=""];
54->60 [style = bold, label=""];
30->53 [style = bold, label=""];
23->17 [style = dashed, label="0"];
31->38 [style = bold, label=""];
38->51 [style = dotted, label="true"];
43->21 [style = solid, label="guestNetworkId"];
9->22 [style = bold, label=""];
4->25 [style = solid, label="profile"];
15->50 [style = bold, label=""];
32->42 [style = solid, label="network"];
38->58 [style = dotted, label="true"];
23->1 [style = bold, label=""];
12->45 [style = solid, label="network"];
38->67 [style = dotted, label="true"];
1->21 [style = bold, label=""];
22->9 [style = dotted, label="true"];
2->20 [style = dotted, label="true"];
10->27 [style = bold, label=""];
36->22 [style = bold, label=""];
38->32 [style = dotted, label="true"];
50->48 [style = bold, label=""];
9->21 [style = bold, label=""];
55->31 [style = solid, label="ntwkId"];
65->46 [style = bold, label=""];
62->45 [style = bold, label=""];
34->0 [style = bold, label=""];
38->41 [style = dotted, label="true"];
10->19 [style = bold, label=""];
34->57 [style = bold, label=""];
68->21 [style = bold, label=""];
67->51 [style = bold, label=""];
58->33 [style = bold, label=""];
38->69 [style = dotted, label="true"];
21->55 [style = dotted, label="true"];
55->47 [style = solid, label="ntwkId"];
9->23 [style = bold, label=""];
14->62 [style = bold, label=""];
26->20 [style = dotted, label="true"];
43->11 [style = solid, label="guestNetworkId"];
21->63 [style = dotted, label="true"];
44->36 [style = bold, label=""];
13->14 [style = bold, label=""];
53->39 [style = bold, label=""];
18->3 [style = solid, label="dest"];
55->32 [style = solid, label="ntwkId"];
9->22 [style = dashed, label="0"];
10->5 [style = dotted, label="true"];
}
