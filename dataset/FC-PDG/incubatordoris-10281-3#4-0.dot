digraph {
35 [style = filled, label = "Deencapsulation.setField(colocateTableIndex,\"group2Schema\",group2Schema)@@@22@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
22 [style = filled, label = "List<List<Long>> balancedBackendsPerBucketSeq = Lists.newArrayList()@@@46@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
38 [style = filled, label = "boolean changed = (Boolean)Deencapsulation.invoke(balancer,\"relocateAndBalance\",groupId,unAvailBackendIds,availBackendIds,colocateTableIndex,infoService,statistic,balancedBackendsPerBucketSeq)@@@26@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
0 [style = filled, label = "Deencapsulation.setField(colocateTableIndex,\"group2Schema\",group2Schema)@@@45@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
12 [style = filled, label = "Deencapsulation.setField(colocateTableIndex,\"group2Schema\",group2Schema)@@@53@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
18 [style = filled, label = "@Mocked ClusterLoadStatistic statistic@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
23 [style = filled, label = "List<Column> distributionCols = Lists.newArrayList()@@@17@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
34 [style = filled, label = "testFixBalanceEndlessLoop2['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
11 [style = filled, label = "colocateTableIndex = createColocateIndex(groupId,Lists.newArrayList(9L,8L,7L,8L,6L,5L,9L,4L,1L,2L,3L,4L,1L,2L,3L))@@@52@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
6 [style = filled, label = "System.out.println(balancedBackendsPerBucketSeq)@@@56@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
9 [style = filled, label = "new Expectations(){}@@@3@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
25 [style = filled, label = "testBalance['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
5 [style = filled, label = "Assert.assertFalse(changed)@@@57@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
4 [style = filled, label = "List<List<Long>> expected = Lists.partition(Lists.newArrayList(9L,5L,3L,4L,6L,8L,7L,6L,1L,2L,9L,4L,1L,2L,3L),3)@@@49@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
15 [style = filled, label = "GroupId groupId = new GroupId(10000,10001)@@@16@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
21 [style = filled, label = "ColocateGroupSchema groupSchema = new ColocateGroupSchema(groupId,distributionCols,5,(short)3)@@@41@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
37 [style = filled, label = "Assert.assertFalse(changed)@@@27@@@['0', '0', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB3BBB"];
10 [style = filled, label = "Map<GroupId,ColocateGroupSchema> group2Schema = Maps.newHashMap()@@@42@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
2 [style = filled, label = "@Mocked SystemInfoService infoService@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
36 [style = filled, label = "ColocateGroupSchema groupSchema = new ColocateGroupSchema(groupId,distributionCols,5,(short)1)@@@18@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
32 [style = filled, label = "Map<GroupId,ColocateGroupSchema> group2Schema = Maps.newHashMap()@@@19@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
8 [style = filled, label = "distributionCols.add(new Column(\"k1\",PrimitiveType.INT))@@@40@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
14 [style = filled, label = "testBalance['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
20 [style = filled, label = "Assert.assertTrue(balancedBackendsPerBucketSeq.isEmpty())@@@58@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
16 [style = filled, label = "Set<Long> unAvailBackendIds = Sets.newHashSet(1L,2L,3L,4L,5L,6L,7L,8L,9L)@@@24@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
30 [style = filled, label = "@Mocked SystemInfoService infoService@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
13 [style = filled, label = "GroupId groupId = new GroupId(10000,10001)@@@38@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
17 [style = filled, label = "changed = (Boolean)Deencapsulation.invoke(balancer,\"relocateAndBalance\",groupId,new HashSet<Long>(),allAvailBackendIds,colocateTableIndex,infoService,statistic,balancedBackendsPerBucketSeq)@@@55@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
19 [style = filled, label = "List<List<Long>> balancedBackendsPerBucketSeq = Lists.newArrayList()@@@23@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
33 [style = filled, label = "List<Long> availBackendIds = Lists.newArrayList()@@@25@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
24 [style = filled, label = "ColocateTableIndex colocateTableIndex = createColocateIndex(groupId,Lists.newArrayList(7L,7L,7L,7L,7L))@@@21@@@['1', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
29 [style = filled, label = "boolean changed = (Boolean)Deencapsulation.invoke(balancer,\"relocateAndBalance\",groupId,Tag.DEFAULT_BACKEND_TAG,new HashSet<Long>(),allAvailBackendIds,colocateTableIndex,infoService,statistic,balancedBackendsPerBucketSeq)@@@48@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
1 [style = filled, label = "group2Schema.put(groupId,groupSchema)@@@20@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
26 [style = filled, label = "changed = (Boolean)Deencapsulation.invoke(balancer,\"relocateAndBalance\",groupId,Tag.DEFAULT_BACKEND_TAG,new HashSet<Long>(),allAvailBackendIds,colocateTableIndex,infoService,statistic,balancedBackendsPerBucketSeq)@@@55@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
27 [style = filled, label = "ColocateGroupSchema groupSchema = new ColocateGroupSchema(groupId,distributionCols,5,ReplicaAllocation.DEFAULT_ALLOCATION)@@@41@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
28 [style = filled, label = "@Mocked SystemInfoService infoService@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
7 [style = filled, label = "balancedBackendsPerBucketSeq.clear()@@@54@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
31 [style = filled, label = "@Mocked ClusterLoadStatistic statistic@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
3 [style = filled, label = "List<Column> distributionCols = Lists.newArrayList()@@@39@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
22->16 [style = solid, label="balancedBackendsPerBucketSeq"];
22->17 [style = solid, label="balancedBackendsPerBucketSeq"];
21->10 [style = bold, label=""];
10->12 [style = solid, label="group2Schema"];
34->9 [style = bold, label=""];
5->20 [style = bold, label=""];
24->35 [style = solid, label="colocateTableIndex"];
21->15 [style = solid, label="groupSchema"];
36->1 [style = solid, label="groupSchema"];
25->28 [style = dotted, label="true"];
27->15 [style = solid, label="groupSchema"];
31->38 [style = solid, label="statistic"];
1->17 [style = solid, label="allAvailBackendIds"];
12->7 [style = bold, label=""];
13->17 [style = solid, label="groupId"];
25->18 [style = dotted, label="true"];
7->26 [style = bold, label=""];
23->0 [style = solid, label="colocateTableIndex"];
24->19 [style = solid, label="changed"];
18->29 [style = solid, label="statistic"];
29->19 [style = solid, label="changed"];
14->9 [style = bold, label=""];
23->36 [style = bold, label=""];
8->27 [style = bold, label=""];
14->18 [style = dotted, label="true"];
13->23 [style = solid, label="groupId"];
14->2 [style = dotted, label="true"];
30->38 [style = solid, label="infoService"];
1->26 [style = solid, label="allAvailBackendIds"];
4->19 [style = bold, label=""];
11->12 [style = bold, label=""];
26->6 [style = bold, label=""];
11->17 [style = solid, label="colocateTableIndex"];
33->38 [style = solid, label="availBackendIds"];
13->27 [style = solid, label="groupId"];
34->31 [style = dotted, label="true"];
11->26 [style = solid, label="colocateTableIndex"];
38->37 [style = bold, label=""];
16->33 [style = bold, label=""];
1->24 [style = solid, label="allAvailBackendIds"];
3->21 [style = solid, label="distributionCols"];
13->24 [style = solid, label="groupId"];
18->17 [style = solid, label="statistic"];
15->24 [style = solid, label="groupId"];
24->38 [style = solid, label="colocateTableIndex"];
18->31 [style = dashed, label="0"];
15->1 [style = solid, label="groupId"];
1->29 [style = solid, label="allAvailBackendIds"];
7->17 [style = bold, label=""];
13->11 [style = solid, label="groupId"];
21->27 [style = dashed, label="0"];
17->6 [style = bold, label=""];
17->5 [style = solid, label="changed"];
3->27 [style = solid, label="distributionCols"];
25->9 [style = bold, label=""];
13->29 [style = solid, label="groupId"];
2->17 [style = solid, label="infoService"];
8->36 [style = dashed, label="0"];
26->5 [style = solid, label="changed"];
23->0 [style = bold, label=""];
2->24 [style = solid, label="infoService"];
19->16 [style = bold, label=""];
11->12 [style = solid, label="colocateTableIndex"];
19->38 [style = solid, label="balancedBackendsPerBucketSeq"];
38->37 [style = solid, label="changed"];
6->5 [style = bold, label=""];
18->24 [style = solid, label="statistic"];
22->24 [style = solid, label="balancedBackendsPerBucketSeq"];
22->29 [style = solid, label="balancedBackendsPerBucketSeq"];
18->26 [style = solid, label="statistic"];
3->8 [style = bold, label=""];
27->10 [style = bold, label=""];
32->1 [style = bold, label=""];
13->26 [style = solid, label="groupId"];
22->1 [style = bold, label=""];
1->29 [style = bold, label=""];
16->38 [style = solid, label="unAvailBackendIds"];
34->30 [style = dotted, label="true"];
10->0 [style = solid, label="group2Schema"];
13->15 [style = solid, label="groupId"];
15->23 [style = bold, label=""];
28->26 [style = solid, label="infoService"];
29->4 [style = bold, label=""];
28->29 [style = solid, label="infoService"];
10->15 [style = bold, label=""];
16->11 [style = bold, label=""];
24->35 [style = bold, label=""];
15->36 [style = solid, label="groupId"];
15->38 [style = solid, label="groupId"];
35->19 [style = bold, label=""];
24->29 [style = dashed, label="0"];
36->32 [style = bold, label=""];
22->26 [style = solid, label="balancedBackendsPerBucketSeq"];
32->35 [style = solid, label="group2Schema"];
4->16 [style = solid, label="expected"];
24->4 [style = bold, label=""];
13->3 [style = bold, label=""];
1->24 [style = bold, label=""];
9->15 [style = bold, label=""];
23->24 [style = dashed, label="0"];
22->6 [style = solid, label="balancedBackendsPerBucketSeq"];
0->22 [style = bold, label=""];
1->16 [style = dashed, label="0"];
13->21 [style = solid, label="groupId"];
8->21 [style = bold, label=""];
33->38 [style = bold, label=""];
17->26 [style = dashed, label="0"];
23->36 [style = solid, label="distributionCols"];
23->29 [style = solid, label="colocateTableIndex"];
9->13 [style = bold, label=""];
23->24 [style = solid, label="colocateTableIndex"];
}
