digraph {
70 [style = filled, label = "String literalString@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
8 [style = filled, label = "innerOrdinal < flattenFieldsCount@@@8@@@['1', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
13 [style = filled, label = "List<Pair<RexNode,String>> flattenedExps@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
63 [style = filled, label = "firstOp.getType().getFieldList()@@@32@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
44 [style = filled, label = "isConstructor(exp) || exp.isA(SqlKind.CAST)@@@15@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
27 [style = filled, label = "int oldOrdinal = ((RexInputRef)firstOp).getIndex()@@@34@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
0 [style = filled, label = "exp instanceof RexCall@@@23@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
30 [style = filled, label = "List<Pair<RexNode,String>> firstOpFlattenedExps = new ArrayList<>()@@@51@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
47 [style = filled, label = "RexNode exp@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
15 [style = filled, label = "i++@@@57@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
19 [style = filled, label = "RewriteRexShuttle shuttle@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
3 [style = filled, label = "int to = from + postFlattenSize(field.getType())@@@35@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
40 [style = filled, label = "newInnerOrdinal < to@@@37@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
9 [style = filled, label = "Ord<RelDataType> newField = getNewFieldForOldInput(oldOrdinal,innerOrdinal)@@@10@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
24 [style = filled, label = "int from = 0@@@31@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
46 [style = filled, label = "operator == SqlStdOperatorTable.ITEM && operands.get(0).getType().isStruct() && operands.get(1).isA(SqlKind.LITERAL) && SqlTypeUtil.inCharFamily(operands.get(1).getType())@@@27@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
42 [style = filled, label = "int innerOrdinal = 0@@@7@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
53 [style = filled, label = "flattenedExps.add(firstOpFlattenedExps.get(i))@@@58@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
54 [style = filled, label = "i < endOfRange@@@56@@@['1', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
55 [style = filled, label = "newInnerOrdinal++@@@38@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
37 [style = filled, label = "List<RexNode> newOperands = operands.stream().map(null).collect(Collectors.toList())@@@63@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
38 [style = filled, label = "flattenNullLiteral(exp.getType(),flattenedExps)@@@18@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
25 [style = filled, label = "flattenedExps.add(Pair.of(exp.accept(shuttle),fieldName))@@@73@@@['1', '0', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
11 [style = filled, label = "flattenProjection(shuttle,firstOp,fieldName + \"$0\",firstOpFlattenedExps)@@@52@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
58 [style = filled, label = "String fieldName@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
56 [style = filled, label = "throw Util.needToImplement(exp)@@@68@@@['0', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB2BBB"];
52 [style = filled, label = "exp instanceof RexInputRef@@@4@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
21 [style = filled, label = "exp.getType().isStruct()@@@3@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
49 [style = filled, label = "final int flattenFieldsCount = postFlattenSize(exp.getType())@@@6@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
61 [style = filled, label = "flattenResultTypeOfRexCall(newExp,fieldName,flattenedExps)@@@64@@@['0', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB2BBB"];
28 [style = filled, label = "firstOp instanceof RexCall@@@50@@@['1', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
43 [style = filled, label = "int i = newInnerOrdinal@@@55@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
4 [style = filled, label = "RexCall call = (RexCall)exp@@@16@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
16 [style = filled, label = "return@@@19@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
50 [style = filled, label = "RexInputRef newRef = new RexInputRef(newField.i,newField.e)@@@11@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
59 [style = filled, label = "flattenProjection['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
7 [style = filled, label = "literalString.equalsIgnoreCase(field.getName())@@@33@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
31 [style = filled, label = "String literalString = ((RexLiteral)operands.get(1)).getValueAs()@@@28@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
64 [style = filled, label = "List<Pair<RexNode,String>> flattenedExps@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
33 [style = filled, label = "RelDataTypeField field@@@32@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
14 [style = filled, label = "int newInnerOrdinal = getNewInnerOrdinal(firstOp,literalString)@@@53@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
57 [style = filled, label = "newExp = rexBuilder.makeCall(exp.getType(),operator,shuttle.visitList(operands))@@@63@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
2 [style = filled, label = "flattenProjection['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
71 [style = filled, label = "return newInnerOrdinal@@@12@@@['0', '0', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB3BBB"];
1 [style = filled, label = "from += postFlattenSize(field.getType())@@@46@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
20 [style = filled, label = "List<RexNode> operands = ((RexCall)exp).getOperands()@@@25@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
26 [style = filled, label = "newExp = rexBuilder.makeCall(exp.getType(),operator,newOperands)@@@64@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
39 [style = filled, label = "int newInnerOrdinal = from@@@36@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
10 [style = filled, label = "RexInputRef newRef = rexBuilder.makeInputRef(newField.e,newField.i)@@@40@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
35 [style = filled, label = "innerOrdinal++@@@9@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
65 [style = filled, label = "getNewInnerOrdinal['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
32 [style = filled, label = "RexNode newExp = exp@@@24@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
66 [style = filled, label = "literalString.equalsIgnoreCase(field.getName())@@@5@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
18 [style = filled, label = "int endOfRange = newInnerOrdinal + postFlattenSize(newExp.getType())@@@54@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
67 [style = filled, label = "RexNode firstOp@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
68 [style = filled, label = "newInnerOrdinal += postFlattenSize(field.getType())@@@9@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
41 [style = filled, label = "flattenedExps.add(Pair.of(newRef,fieldName))@@@12@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
60 [style = filled, label = "RewriteRexShuttle shuttle@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
62 [style = filled, label = "flattenedExps.add(Pair.of(exp.accept(shuttle),fieldName))@@@72@@@['0', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB2BBB"];
45 [style = filled, label = "SqlOperator operator = ((RexCall)exp).getOperator()@@@26@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
48 [style = filled, label = "exp.isA(SqlKind.CAST) && RexLiteral.isNullLiteral(call.operands.get(0))@@@17@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
17 [style = filled, label = "flattenedExps.add(Pair.of(newRef,fieldName))@@@41@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
29 [style = filled, label = "String fieldName@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
5 [style = filled, label = "firstOp instanceof RexInputRef@@@30@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
12 [style = filled, label = "flattenResultTypeOfRexCall(newExp,fieldName,flattenedExps)@@@65@@@['1', '0', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
22 [style = filled, label = "RexNode firstOp = operands.get(0)@@@29@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
36 [style = filled, label = "Ord<RelDataType> newField = getNewFieldForOldInput(oldOrdinal,newInnerOrdinal)@@@39@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
69 [style = filled, label = "int newInnerOrdinal = 0@@@3@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
34 [style = filled, label = "final int oldOrdinal = ((RexInputRef)exp).getIndex()@@@5@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
6 [style = filled, label = "throw Util.needToImplement(exp)@@@69@@@['1', '0', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
23 [style = filled, label = "firstOp.getType().getFieldList()@@@32@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
51 [style = filled, label = "flattenProjections(shuttle,call.getOperands(),Collections.nCopies(call.getOperands().size(),null),fieldName,flattenedExps)@@@21@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
28->11 [style = dotted, label="true"];
9->50 [style = bold, label=""];
16->51 [style = bold, label=""];
52->44 [style = bold, label=""];
29->41 [style = solid, label="fieldName"];
26->12 [style = solid, label="newExp"];
1->39 [style = solid, label="from"];
11->14 [style = bold, label=""];
37->26 [style = solid, label="newOperands"];
55->36 [style = solid, label="newInnerOrdinal"];
14->18 [style = solid, label="newInnerOrdinal"];
5->23 [style = dotted, label="true"];
15->54 [style = bold, label=""];
28->14 [style = dotted, label="true"];
55->40 [style = bold, label=""];
68->66 [style = bold, label=""];
21->52 [style = dotted, label="true"];
46->31 [style = bold, label=""];
10->17 [style = bold, label=""];
58->62 [style = solid, label="fieldName"];
21->52 [style = bold, label=""];
42->9 [style = solid, label="innerOrdinal"];
40->36 [style = dotted, label="true"];
39->55 [style = solid, label="newInnerOrdinal"];
24->39 [style = solid, label="from"];
46->37 [style = dotted, label="false"];
7->39 [style = dotted, label="true"];
40->10 [style = dotted, label="true"];
5->28 [style = bold, label=""];
20->57 [style = solid, label="operands"];
42->8 [style = solid, label="innerOrdinal"];
45->57 [style = solid, label="operator"];
5->24 [style = dotted, label="true"];
28->30 [style = dotted, label="true"];
13->12 [style = solid, label="flattenedExps"];
30->11 [style = bold, label=""];
48->51 [style = bold, label=""];
26->12 [style = bold, label=""];
52->8 [style = dotted, label="true"];
58->41 [style = solid, label="fieldName"];
28->18 [style = dotted, label="true"];
19->11 [style = solid, label="shuttle"];
22->11 [style = solid, label="firstOp"];
22->14 [style = solid, label="firstOp"];
35->8 [style = bold, label=""];
14->43 [style = solid, label="newInnerOrdinal"];
7->27 [style = dotted, label="true"];
65->69 [style = bold, label=""];
54->53 [style = bold, label=""];
3->39 [style = bold, label=""];
65->70 [style = dotted, label="true"];
40->55 [style = dotted, label="true"];
60->11 [style = solid, label="shuttle"];
7->1 [style = dotted, label="false"];
45->26 [style = solid, label="operator"];
32->20 [style = bold, label=""];
29->17 [style = solid, label="fieldName"];
27->36 [style = solid, label="oldOrdinal"];
20->45 [style = bold, label=""];
18->54 [style = solid, label="endOfRange"];
59->60 [style = dotted, label="true"];
5->28 [style = dotted, label="false"];
44->48 [style = dotted, label="true"];
0->46 [style = dotted, label="true"];
29->25 [style = solid, label="fieldName"];
0->45 [style = dotted, label="true"];
2->47 [style = dotted, label="true"];
7->1 [style = bold, label=""];
57->61 [style = bold, label=""];
28->30 [style = bold, label=""];
2->29 [style = dotted, label="true"];
46->5 [style = dotted, label="true"];
37->26 [style = bold, label=""];
7->40 [style = dotted, label="true"];
46->31 [style = dotted, label="true"];
47->6 [style = solid, label="exp"];
44->0 [style = dotted, label="false"];
60->51 [style = solid, label="shuttle"];
5->33 [style = dotted, label="true"];
21->25 [style = bold, label=""];
43->53 [style = solid, label="i"];
46->61 [style = dotted, label="false"];
46->37 [style = bold, label=""];
54->53 [style = dotted, label="true"];
45->46 [style = solid, label="operator"];
22->5 [style = bold, label=""];
46->57 [style = dotted, label="false"];
8->50 [style = dotted, label="true"];
52->44 [style = dotted, label="false"];
44->4 [style = bold, label=""];
58->17 [style = solid, label="fieldName"];
5->7 [style = dotted, label="true"];
22->28 [style = solid, label="firstOp"];
2->21 [style = bold, label=""];
65->67 [style = dotted, label="true"];
47->56 [style = solid, label="exp"];
66->71 [style = bold, label=""];
24->3 [style = solid, label="from"];
44->4 [style = dotted, label="true"];
14->18 [style = bold, label=""];
1->68 [style = dashed, label="0"];
45->46 [style = bold, label=""];
64->51 [style = solid, label="flattenedExps"];
24->7 [style = bold, label=""];
46->26 [style = dotted, label="false"];
50->41 [style = bold, label=""];
47->52 [style = solid, label="exp"];
43->15 [style = solid, label="i"];
59->21 [style = bold, label=""];
2->19 [style = dotted, label="true"];
40->17 [style = dotted, label="true"];
35->8 [style = solid, label="innerOrdinal"];
10->17 [style = solid, label="newRef"];
42->35 [style = solid, label="innerOrdinal"];
15->53 [style = solid, label="i"];
60->62 [style = solid, label="shuttle"];
8->35 [style = dotted, label="true"];
48->16 [style = dotted, label="true"];
0->6 [style = dotted, label="false"];
49->8 [style = solid, label="flattenFieldsCount"];
34->49 [style = bold, label=""];
42->8 [style = bold, label=""];
38->16 [style = bold, label=""];
68->71 [style = solid, label="newInnerOrdinal"];
52->42 [style = dotted, label="true"];
21->62 [style = bold, label=""];
47->44 [style = solid, label="exp"];
1->3 [style = solid, label="from"];
8->41 [style = dotted, label="true"];
35->9 [style = solid, label="innerOrdinal"];
1->7 [style = bold, label=""];
44->51 [style = dotted, label="true"];
50->41 [style = solid, label="newRef"];
17->55 [style = bold, label=""];
59->64 [style = dotted, label="true"];
39->36 [style = solid, label="newInnerOrdinal"];
69->71 [style = solid, label="newInnerOrdinal"];
5->63 [style = dotted, label="true"];
21->25 [style = dotted, label="false"];
40->36 [style = bold, label=""];
39->40 [style = bold, label=""];
5->24 [style = bold, label=""];
54->15 [style = dotted, label="true"];
64->38 [style = solid, label="flattenedExps"];
28->43 [style = dotted, label="true"];
19->51 [style = solid, label="shuttle"];
0->56 [style = dotted, label="false"];
59->58 [style = dotted, label="true"];
8->9 [style = dotted, label="true"];
0->32 [style = dotted, label="true"];
46->12 [style = dotted, label="false"];
0->32 [style = bold, label=""];
58->51 [style = solid, label="fieldName"];
46->22 [style = dotted, label="true"];
4->48 [style = bold, label=""];
69->66 [style = bold, label=""];
43->54 [style = bold, label=""];
46->57 [style = bold, label=""];
48->38 [style = dotted, label="true"];
13->38 [style = solid, label="flattenedExps"];
36->10 [style = bold, label=""];
41->35 [style = bold, label=""];
15->54 [style = solid, label="i"];
49->42 [style = bold, label=""];
57->61 [style = solid, label="newExp"];
52->49 [style = dotted, label="true"];
64->61 [style = solid, label="flattenedExps"];
31->22 [style = bold, label=""];
30->11 [style = solid, label="firstOpFlattenedExps"];
0->6 [style = bold, label=""];
52->34 [style = dotted, label="true"];
19->25 [style = solid, label="shuttle"];
27->3 [style = bold, label=""];
66->68 [style = bold, label=""];
29->11 [style = solid, label="fieldName"];
0->20 [style = dotted, label="true"];
28->54 [style = dotted, label="true"];
31->14 [style = solid, label="literalString"];
52->34 [style = bold, label=""];
3->40 [style = solid, label="to"];
58->11 [style = solid, label="fieldName"];
47->32 [style = solid, label="exp"];
39->40 [style = solid, label="newInnerOrdinal"];
58->61 [style = solid, label="fieldName"];
34->9 [style = solid, label="oldOrdinal"];
48->38 [style = bold, label=""];
43->54 [style = solid, label="i"];
18->43 [style = bold, label=""];
7->3 [style = dotted, label="true"];
0->56 [style = bold, label=""];
68->71 [style = bold, label=""];
13->51 [style = solid, label="flattenedExps"];
47->4 [style = solid, label="exp"];
8->9 [style = bold, label=""];
7->27 [style = bold, label=""];
21->62 [style = dotted, label="false"];
47->0 [style = solid, label="exp"];
22->5 [style = solid, label="firstOp"];
55->40 [style = solid, label="newInnerOrdinal"];
59->47 [style = dotted, label="true"];
53->15 [style = bold, label=""];
66->68 [style = dotted, label="false"];
29->51 [style = solid, label="fieldName"];
2->13 [style = dotted, label="true"];
44->0 [style = bold, label=""];
29->12 [style = solid, label="fieldName"];
}
