digraph {
9 [style = filled, label = "return _snapshotDao.findById(snapshotId)@@@56@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
36 [style = filled, label = "jobResult instanceof Throwable@@@52@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
0 [style = filled, label = "boolean quiescevm@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
13 [style = filled, label = "CreateSnapshotPayload payload = new CreateSnapshotPayload()@@@10@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
28 [style = filled, label = "jobContext.isJobDispatchedBy(VmWorkConstants.VM_WORK_JOB_DISPATCHER)@@@23@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
2 [style = filled, label = "AsyncJobExecutionContext jobContext = AsyncJobExecutionContext.getCurrentExecutionContext()@@@22@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
47 [style = filled, label = "Account account@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
21 [style = filled, label = "Snapshot.LocationType locationType@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
49 [style = filled, label = "_accountMgr.checkAccess(caller,null,true,volume)@@@8@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA1AAABBB2BBB"];
6 [style = filled, label = "return orchestrateTakeVolumeSnapshot(volumeId,policyId,snapshotId,account,quiescevm,locationType,asyncBackup)@@@27@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
16 [style = filled, label = "payload.setSnapshotPolicyId(policyId)@@@12@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
29 [style = filled, label = "Long volumeId@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
38 [style = filled, label = "throw new InvalidParameterValueException(\"Creating snapshot failed due to volume:\" + volumeId + \" doesn't exist\")@@@5@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
63 [style = filled, label = "boolean asyncBackup@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
45 [style = filled, label = "Outcome<Snapshot> outcome = takeVolumeSnapshotThroughJobQueue(vm.getId(),volumeId,policyId,snapshotId,account.getId(),quiescevm,locationType,asyncBackup)@@@34@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
51 [style = filled, label = "Long volumeId@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
61 [style = filled, label = "payload.setLocationType(locationType)@@@15@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
31 [style = filled, label = "volume.getState() != Volume.State.Ready@@@7@@@['1', '1', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
32 [style = filled, label = "volume.getInstanceId() != null@@@17@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
33 [style = filled, label = "throw (ConcurrentOperationException)jobResult@@@47@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
64 [style = filled, label = "Long snapshotId@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
66 [style = filled, label = "Snapshot.LocationType locationType@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
35 [style = filled, label = "vm != null@@@20@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
62 [style = filled, label = "boolean quiescevm@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
22 [style = filled, label = "java.util.concurrent.ExecutionException e@@@41@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
11 [style = filled, label = "VMInstanceVO vm = null@@@16@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
27 [style = filled, label = "StoragePoolVO storagePoolVO = _storagePoolDao.findById(volume.getPoolId())@@@12@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
15 [style = filled, label = "payload.setAsyncBackup(asyncBackup)@@@16@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
34 [style = filled, label = "payload.setQuiescevm(quiescevm)@@@14@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
57 [style = filled, label = "Long policyId@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
65 [style = filled, label = "orchestrateTakeVolumeSnapshot['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
18 [style = filled, label = "placeHolder = createPlaceHolderWork(vm.getId())@@@25@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
52 [style = filled, label = "Snapshot.LocationType locationType@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
10 [style = filled, label = "storagePoolVO.isManaged() && locationType == null@@@13@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
8 [style = filled, label = "volume == null@@@4@@@['1', '1', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
4 [style = filled, label = "boolean asyncBackup@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
41 [style = filled, label = "outcome.get()@@@36@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
37 [style = filled, label = "{_workJobDao.expunge(placeHolder.getId())}@@@29@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
56 [style = filled, label = "_accountMgr.checkAccess(caller,null,true,vm)@@@21@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA1AAABBB2BBB"];
17 [style = filled, label = "jobResult instanceof ResourceAllocationException@@@49@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
58 [style = filled, label = "boolean quiescevm@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
7 [style = filled, label = "InterruptedException e@@@38@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
43 [style = filled, label = "Object jobResult = _jobMgr.unmarshallResultObject(outcome.getJob())@@@44@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
24 [style = filled, label = "throw new RuntimeException(\"Unexpected exception\",(Throwable)jobResult)@@@53@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
40 [style = filled, label = "return volService.takeSnapshot(volume)@@@18@@@['1', '1', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
53 [style = filled, label = "Account caller = CallContext.current().getCallingAccount()@@@3@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA1AAABBB2BBB"];
48 [style = filled, label = "VolumeInfo volume = volFactory.getVolume(volumeId)@@@3@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
5 [style = filled, label = "vm = _vmInstanceDao.findById(volume.getInstanceId())@@@18@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
19 [style = filled, label = "takeSnapshotInternal['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
55 [style = filled, label = "boolean asyncBackup@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
59 [style = filled, label = "Long policyId@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
12 [style = filled, label = "throw (ResourceAllocationException)jobResult@@@50@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
14 [style = filled, label = "throw new InvalidParameterValueException(\"VolumeId: \" + volumeId + \" is not in \" + Volume.State.Ready + \" state but \" + volume.getState() + \". Cannot take snapshot.\")@@@8@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
44 [style = filled, label = "payload.setAccount(account)@@@13@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
60 [style = filled, label = "Long volumeId@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
26 [style = filled, label = "throw new RuntimeException(\"Operation is interrupted\",e)@@@39@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
25 [style = filled, label = "payload.setSnapshotId(snapshotId)@@@11@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
30 [style = filled, label = "locationType = Snapshot.LocationType.PRIMARY@@@14@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
39 [style = filled, label = "volume.addPayload(payload)@@@17@@@['1', '1', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
3 [style = filled, label = "Long policyId@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
20 [style = filled, label = "Account account@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
54 [style = filled, label = "Long snapshotId@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
50 [style = filled, label = "takeSnapshotInternal['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
1 [style = filled, label = "jobResult instanceof ConcurrentOperationException@@@46@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
23 [style = filled, label = "throw new RuntimeException(\"Execution excetion\",e)@@@42@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
46 [style = filled, label = "jobResult != null@@@45@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
42 [style = filled, label = "VmWorkJobVO placeHolder = null@@@24@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
67 [style = filled, label = "Account account@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
19->21 [style = dotted, label="true"];
58->45 [style = solid, label="quiescevm"];
19->0 [style = dotted, label="true"];
35->40 [style = dotted, label="false"];
60->48 [style = solid, label="volumeId"];
65->66 [style = dotted, label="true"];
42->18 [style = bold, label=""];
3->6 [style = solid, label="policyId"];
28->6 [style = dotted, label="true"];
10->30 [style = bold, label=""];
50->54 [style = dotted, label="true"];
48->8 [style = bold, label=""];
29->14 [style = solid, label="volumeId"];
51->14 [style = solid, label="volumeId"];
58->6 [style = solid, label="quiescevm"];
13->25 [style = bold, label=""];
43->46 [style = bold, label=""];
54->9 [style = solid, label="snapshotId"];
6->37 [style = bold, label=""];
45->41 [style = bold, label=""];
34->61 [style = bold, label=""];
47->45 [style = solid, label="snapshotId"];
10->11 [style = bold, label=""];
8->31 [style = bold, label=""];
28->45 [style = dotted, label="false"];
57->16 [style = solid, label="policyId"];
43->33 [style = solid, label="jobResult"];
31->14 [style = dotted, label="true"];
1->33 [style = bold, label=""];
64->25 [style = solid, label="snapshotId"];
1->33 [style = dotted, label="true"];
53->56 [style = solid, label="caller"];
11->56 [style = solid, label="vm"];
4->45 [style = solid, label="asyncBackup"];
44->34 [style = bold, label=""];
50->57 [style = dotted, label="true"];
51->6 [style = solid, label="volumeId"];
35->56 [style = dotted, label="true"];
25->16 [style = bold, label=""];
0->34 [style = solid, label="quiescevm"];
48->40 [style = solid, label="volume"];
13->39 [style = solid, label="payload"];
29->45 [style = solid, label="volumeId"];
50->53 [style = bold, label=""];
35->15 [style = dotted, label="false"];
15->39 [style = bold, label=""];
1->17 [style = bold, label=""];
43->17 [style = solid, label="jobResult"];
33->9 [style = bold, label=""];
36->24 [style = bold, label=""];
47->25 [style = solid, label="snapshotId"];
49->31 [style = bold, label=""];
65->48 [style = bold, label=""];
19->3 [style = dotted, label="true"];
28->45 [style = bold, label=""];
53->49 [style = solid, label="caller"];
34->15 [style = bold, label=""];
35->44 [style = dotted, label="false"];
29->48 [style = solid, label="volumeId"];
30->45 [style = solid, label="locationType"];
14->13 [style = bold, label=""];
65->60 [style = dotted, label="true"];
21->45 [style = solid, label="locationType"];
35->13 [style = bold, label=""];
65->67 [style = dotted, label="true"];
57->45 [style = solid, label="policyId"];
23->43 [style = bold, label=""];
2->28 [style = bold, label=""];
51->45 [style = solid, label="volumeId"];
11->32 [style = bold, label=""];
19->20 [style = dotted, label="true"];
35->28 [style = dotted, label="true"];
12->9 [style = bold, label=""];
59->16 [style = solid, label="policyId"];
47->44 [style = solid, label="account"];
67->44 [style = solid, label="account"];
65->59 [style = dotted, label="true"];
29->6 [style = solid, label="volumeId"];
20->44 [style = solid, label="account"];
50->55 [style = dotted, label="true"];
38->31 [style = bold, label=""];
55->45 [style = solid, label="asyncBackup"];
58->34 [style = solid, label="quiescevm"];
4->6 [style = solid, label="asyncBackup"];
63->15 [style = solid, label="asyncBackup"];
46->1 [style = bold, label=""];
43->1 [style = solid, label="jobResult"];
8->49 [style = bold, label=""];
50->58 [style = dotted, label="true"];
20->6 [style = solid, label="account"];
19->48 [style = bold, label=""];
35->13 [style = dotted, label="false"];
28->42 [style = dotted, label="true"];
31->14 [style = bold, label=""];
62->34 [style = solid, label="quiescevm"];
32->5 [style = dotted, label="true"];
18->6 [style = bold, label=""];
60->38 [style = solid, label="volumeId"];
3->45 [style = solid, label="policyId"];
30->6 [style = solid, label="locationType"];
50->52 [style = dotted, label="true"];
22->23 [style = dotted, label="true"];
43->46 [style = solid, label="jobResult"];
55->15 [style = solid, label="asyncBackup"];
35->2 [style = bold, label=""];
28->46 [style = dotted, label="false"];
57->6 [style = solid, label="policyId"];
47->6 [style = solid, label="account"];
8->38 [style = dotted, label="true"];
21->10 [style = solid, label="locationType"];
51->48 [style = solid, label="volumeId"];
38->49 [style = bold, label=""];
21->6 [style = solid, label="locationType"];
7->26 [style = dotted, label="true"];
0->6 [style = solid, label="quiescevm"];
52->10 [style = solid, label="locationType"];
46->9 [style = bold, label=""];
5->35 [style = bold, label=""];
54->45 [style = solid, label="snapshotId"];
8->38 [style = bold, label=""];
43->24 [style = solid, label="jobResult"];
28->41 [style = dotted, label="true"];
17->36 [style = bold, label=""];
17->12 [style = dotted, label="true"];
47->9 [style = solid, label="snapshotId"];
53->48 [style = bold, label=""];
28->42 [style = bold, label=""];
19->29 [style = dotted, label="true"];
19->47 [style = dotted, label="true"];
50->47 [style = dotted, label="true"];
35->25 [style = dotted, label="false"];
24->9 [style = bold, label=""];
46->1 [style = dotted, label="true"];
28->43 [style = dotted, label="false"];
31->13 [style = bold, label=""];
65->64 [style = dotted, label="true"];
0->45 [style = solid, label="quiescevm"];
36->24 [style = dotted, label="true"];
26->43 [style = bold, label=""];
14->27 [style = bold, label=""];
61->15 [style = bold, label=""];
60->14 [style = solid, label="volumeId"];
47->6 [style = solid, label="snapshotId"];
29->38 [style = solid, label="volumeId"];
65->62 [style = dotted, label="true"];
35->56 [style = bold, label=""];
51->38 [style = solid, label="volumeId"];
32->5 [style = bold, label=""];
17->36 [style = dotted, label="false"];
52->6 [style = solid, label="locationType"];
41->43 [style = bold, label=""];
50->51 [style = dotted, label="true"];
1->17 [style = dotted, label="false"];
4->15 [style = solid, label="asyncBackup"];
30->11 [style = bold, label=""];
7->26 [style = bold, label=""];
17->12 [style = bold, label=""];
10->30 [style = dotted, label="true"];
47->67 [style = dashed, label="0"];
65->63 [style = dotted, label="true"];
54->25 [style = solid, label="snapshotId"];
19->4 [style = dotted, label="true"];
55->6 [style = solid, label="asyncBackup"];
36->9 [style = bold, label=""];
3->16 [style = solid, label="policyId"];
16->44 [style = bold, label=""];
11->35 [style = solid, label="vm"];
56->2 [style = bold, label=""];
35->2 [style = dotted, label="true"];
32->35 [style = bold, label=""];
27->10 [style = bold, label=""];
48->8 [style = solid, label="volume"];
43->12 [style = solid, label="jobResult"];
52->45 [style = solid, label="locationType"];
66->61 [style = solid, label="locationType"];
39->40 [style = bold, label=""];
22->23 [style = bold, label=""];
43->36 [style = solid, label="jobResult"];
35->16 [style = dotted, label="false"];
28->9 [style = dotted, label="false"];
54->6 [style = solid, label="snapshotId"];
5->35 [style = solid, label="vm"];
28->18 [style = dotted, label="true"];
48->49 [style = solid, label="volume"];
31->27 [style = bold, label=""];
35->39 [style = dotted, label="false"];
5->56 [style = solid, label="vm"];
35->34 [style = dotted, label="false"];
}
