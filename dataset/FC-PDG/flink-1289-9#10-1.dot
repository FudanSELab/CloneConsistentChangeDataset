digraph {
2 [style = filled, label = "StateDescriptor<S,SV> stateDesc@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
7 [style = filled, label = "migrateStateValues(stateDesc,oldStateInfo)@@@13@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
39 [style = filled, label = "stateCompatibility.isIncompatible()@@@14@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
40 [style = filled, label = "RegisteredKeyValueStateBackendMetaInfo<N,V> newMetaInfo = new RegisteredKeyValueStateBackendMetaInfo<>(stateDesc.getType(),stateDesc.getName(),namespaceSerializer,newStateSerializer,snapshotTransformFactory)@@@20@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
11 [style = filled, label = "return restoredKvStateMetaInfo@@@18@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
18 [style = filled, label = "TypeSerializer<SV> previousStateSerializer = restoredKvStateMetaInfo.getStateSerializer()@@@10@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
5 [style = filled, label = "Tuple2<ColumnFamilyHandle,RegisteredKeyValueStateBackendMetaInfo<N,SV>> oldStateInfo@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
28 [style = filled, label = "throw new StateMigrationException(\"For heap backends, the new namespace serializer must be compatible.\")@@@10@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
38 [style = filled, label = "TypeSerializerSchemaCompatibility<V> stateCompatibility = restoredKvMetaInfo.updateStateSerializer(newStateSerializer)@@@13@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
4 [style = filled, label = "newStateSerializerCompatibility.isCompatibleAfterMigration()@@@12@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
43 [style = filled, label = "RegisteredKeyValueStateBackendMetaInfo<N,V> restoredKvMetaInfo = stateTable.getMetaInfo()@@@6@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
34 [style = filled, label = "stateTable != null@@@5@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
31 [style = filled, label = "TypeSerializerSchemaCompatibility<N> namespaceCompatibility = restoredKvMetaInfo.updateNamespaceSerializer(namespaceSerializer)@@@8@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
27 [style = filled, label = "@SuppressWarnings(\"unchecked\") StateTable<K,N,V> stateTable = (StateTable<K,N,V>)registeredKVStates.get(stateDesc.getName())@@@3@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
14 [style = filled, label = "newStateSerializerCompatibility.isIncompatible()@@@15@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
21 [style = filled, label = "TypeSerializer<N> previousNamespaceSerializer = restoredKvStateMetaInfo.getNamespaceSerializer()@@@4@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
12 [style = filled, label = "throw new StateMigrationException(\"The new namespace serializer must be compatible.\")@@@6@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
36 [style = filled, label = "tryRegisterStateTable['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
24 [style = filled, label = "throw new StateMigrationException(\"For heap backends, the new state serializer must not be incompatible.\")@@@15@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
44 [style = filled, label = "TypeSerializer<V> newStateSerializer = stateDesc.getSerializer()@@@4@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
13 [style = filled, label = "s.isCompatibleAfterMigration() || s.isIncompatible()@@@6@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
1 [style = filled, label = "@SuppressWarnings(\"unchecked\") RegisteredKeyValueStateBackendMetaInfo<N,SV> restoredKvStateMetaInfo = oldStateInfo.f1@@@3@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
25 [style = filled, label = "stateTable = snapshotStrategy.newStateTable(keyContext,newMetaInfo,keySerializer)@@@21@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
29 [style = filled, label = "restoredKvMetaInfo.checkStateMetaInfo(stateDesc)@@@12@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
15 [style = filled, label = "TypeSerializerSchemaCompatibility<SV> newStateSerializerCompatibility = restoredKvStateMetaInfo.updateStateSerializer(stateSerializer)@@@11@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
17 [style = filled, label = "TypeSerializer<N> namespaceSerializer@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
9 [style = filled, label = "updateRestoredStateMetaInfo['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
41 [style = filled, label = "return stateTable@@@24@@@['0', '0', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB3BBB"];
6 [style = filled, label = "TypeSerializerSchemaCompatibility<N> s = restoredKvStateMetaInfo.updateNamespaceSerializer(namespaceSerializer)@@@5@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
10 [style = filled, label = "restoredKvStateMetaInfo.checkStateMetaInfo(stateDesc)@@@9@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
26 [style = filled, label = "TypeSerializer<N> namespaceSerializer@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
3 [style = filled, label = "TypeSerializer<N> namespaceSerializer@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
0 [style = filled, label = "TypeSerializer<SV> stateSerializer@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
42 [style = filled, label = "registeredKVStates.put(stateDesc.getName(),stateTable)@@@22@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
22 [style = filled, label = "StateDescriptor<S,SV> stateDesc@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
32 [style = filled, label = "@Nonnull StateSnapshotTransformFactory<V> snapshotTransformFactory@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
19 [style = filled, label = "throw new StateMigrationException(\"The new state serializer (\" + stateSerializer + \") must not be incompatible with the old state serializer (\" + previousStateSerializer + \").\")@@@16@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
23 [style = filled, label = "throw new StateMigrationException(\"The new namespace serializer (\" + namespaceSerializer + \") must be compatible with the old namespace serializer (\" + previousNamespaceSerializer + \").\")@@@7@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
35 [style = filled, label = "stateTable.setMetaInfo(restoredKvMetaInfo)@@@17@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
33 [style = filled, label = "namespaceCompatibility.isCompatibleAfterMigration() || namespaceCompatibility.isIncompatible()@@@9@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
30 [style = filled, label = "StateDescriptor<?,V> stateDesc@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
20 [style = filled, label = "TypeSerializer<SV> stateSerializer@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
37 [style = filled, label = "restoredKvMetaInfo.updateSnapshotTransformFactory(snapshotTransformFactory)@@@7@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
16 [style = filled, label = "updateRestoredStateMetaInfo['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
8 [style = filled, label = "throw new StateMigrationException(\"The new state serializer cannot be incompatible.\")@@@14@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
20->19 [style = solid, label="stateSerializer"];
42->41 [style = bold, label=""];
14->19 [style = dotted, label="true"];
39->24 [style = dotted, label="true"];
35->41 [style = bold, label=""];
18->19 [style = solid, label="previousStateSerializer"];
1->27 [style = dashed, label="0"];
27->44 [style = bold, label=""];
5->7 [style = solid, label="oldStateInfo"];
44->38 [style = solid, label="newStateSerializer"];
16->17 [style = dotted, label="true"];
33->28 [style = dotted, label="true"];
34->29 [style = dotted, label="true"];
40->25 [style = bold, label=""];
4->7 [style = dotted, label="true"];
16->20 [style = dotted, label="true"];
39->24 [style = bold, label=""];
19->11 [style = bold, label=""];
4->39 [style = dashed, label="0"];
38->39 [style = bold, label=""];
21->23 [style = solid, label="previousNamespaceSerializer"];
15->38 [style = dashed, label="0"];
34->43 [style = dotted, label="true"];
12->10 [style = bold, label=""];
37->31 [style = bold, label=""];
43->35 [style = solid, label="restoredKvMetaInfo"];
1->21 [style = bold, label=""];
34->42 [style = dotted, label="false"];
16->5 [style = dotted, label="true"];
25->42 [style = solid, label="stateTable"];
44->40 [style = solid, label="newStateSerializer"];
8->11 [style = bold, label=""];
14->11 [style = bold, label=""];
34->37 [style = dotted, label="true"];
40->25 [style = solid, label="newMetaInfo"];
2->7 [style = solid, label="stateDesc"];
7->11 [style = bold, label=""];
20->15 [style = solid, label="stateSerializer"];
33->28 [style = bold, label=""];
3->6 [style = solid, label="namespaceSerializer"];
18->15 [style = bold, label=""];
32->37 [style = solid, label="snapshotTransformFactory"];
2->10 [style = solid, label="stateDesc"];
34->25 [style = dotted, label="false"];
10->29 [style = dashed, label="0"];
13->23 [style = dotted, label="true"];
34->38 [style = dotted, label="true"];
33->29 [style = bold, label=""];
34->31 [style = dotted, label="true"];
13->12 [style = bold, label=""];
22->10 [style = solid, label="stateDesc"];
31->33 [style = bold, label=""];
39->35 [style = bold, label=""];
44->34 [style = bold, label=""];
23->10 [style = bold, label=""];
34->40 [style = dotted, label="false"];
17->6 [style = solid, label="namespaceSerializer"];
30->29 [style = solid, label="stateDesc"];
14->8 [style = bold, label=""];
29->38 [style = bold, label=""];
27->34 [style = solid, label="stateTable"];
9->1 [style = bold, label=""];
9->3 [style = dotted, label="true"];
13->10 [style = bold, label=""];
10->18 [style = bold, label=""];
28->29 [style = bold, label=""];
4->14 [style = bold, label=""];
9->0 [style = dotted, label="true"];
12->23 [style = dashed, label="0"];
4->14 [style = dotted, label="false"];
0->15 [style = solid, label="stateSerializer"];
34->40 [style = bold, label=""];
14->19 [style = bold, label=""];
36->32 [style = dotted, label="true"];
4->7 [style = bold, label=""];
34->39 [style = dotted, label="true"];
1->6 [style = bold, label=""];
16->1 [style = bold, label=""];
34->35 [style = dotted, label="true"];
6->13 [style = bold, label=""];
34->33 [style = dotted, label="true"];
14->8 [style = dotted, label="true"];
25->42 [style = bold, label=""];
34->43 [style = bold, label=""];
36->30 [style = dotted, label="true"];
36->26 [style = dotted, label="true"];
9->5 [style = dotted, label="true"];
8->19 [style = dashed, label="0"];
26->40 [style = solid, label="namespaceSerializer"];
10->15 [style = bold, label=""];
21->6 [style = bold, label=""];
13->12 [style = dotted, label="true"];
24->35 [style = bold, label=""];
1->11 [style = solid, label="restoredKvStateMetaInfo"];
17->23 [style = solid, label="namespaceSerializer"];
43->37 [style = bold, label=""];
27->41 [style = solid, label="stateTable"];
16->22 [style = dotted, label="true"];
36->27 [style = bold, label=""];
9->2 [style = dotted, label="true"];
22->7 [style = solid, label="stateDesc"];
32->40 [style = solid, label="snapshotTransformFactory"];
15->4 [style = bold, label=""];
13->23 [style = bold, label=""];
26->31 [style = solid, label="namespaceSerializer"];
25->41 [style = solid, label="stateTable"];
}
