digraph {
33 [style = filled, label = "{if (clonedVm != null) {s_logger.debug(String.format(\"Destroying cloned VM: %s with its disks\",clonedVm.getName()))clonedVm.destroy()}}@@@51@@@['1', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
25 [style = filled, label = "return new Ternary<String,Long,Long>(installPath + \"/\" + templateUniqueName + \".ova\",physicalSize,virtualSize)@@@49@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
53 [style = filled, label = "files@@@33@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
55 [style = filled, label = "createTemplateFromVolume['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
2 [style = filled, label = "DatacenterMO dcMo = new DatacenterMO(context,hyperHost.getHyperHostDatacenter())@@@24@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
20 [style = filled, label = "File(( files = new File(installFullPath).listFiles()@@@31@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
74 [style = filled, label = "long virtualSize = processor.getTemplateVirtualSize(installFullPath,templateUniqueName)@@@8@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
13 [style = filled, label = "OVAProcessor processor = new OVAProcessor()@@@42@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
17 [style = filled, label = "String nfsVersion@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
27 [style = filled, label = "long templateId@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
11 [style = filled, label = "File file@@@33@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
18 [style = filled, label = "VmwareHypervisorHost hyperHost@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
6 [style = filled, label = "clonedVm.exportVm(secondaryMountPoint + \"/\" + installPath,templateUniqueName,false,false)@@@29@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
1 [style = filled, label = "throw new Exception(msg)@@@22@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
37 [style = filled, label = "Map<String,Object> params = new HashMap<>()@@@43@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
70 [style = filled, label = "writeMetaOvaForTemplate(installFullPath,ovfFilename + \".ovf\",templateVMDKName,templateUniqueName,physicalSize)@@@10@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
31 [style = filled, label = "String templateUniqueName@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
77 [style = filled, label = "String templateVMDKName@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
71 [style = filled, label = "processor.configure(\"OVA Processor\",params)@@@7@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
45 [style = filled, label = "VirtualMachineMO vmMo@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
28 [style = filled, label = "String secondaryMountPoint = mountService.getMountPoint(secStorageUrl,nfsVersion)@@@3@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
10 [style = filled, label = "String installPath@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
50 [style = filled, label = "String templateUniqueName@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
76 [style = filled, label = "return new Size(physicalSize,virtualSize)@@@11@@@['0', '0', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB3BBB"];
60 [style = filled, label = "String secStorageUrl@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
38 [style = filled, label = "ManagedObjectReference morPool = hyperHost.getHyperHostOwnerResourcePool()@@@25@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
29 [style = filled, label = "String installFullPath = secondaryMountPoint + \"/\" + installPath@@@4@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
54 [style = filled, label = "String nfsVersion@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
14 [style = filled, label = "File file@@@33@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
75 [style = filled, label = "long templateId@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
42 [style = filled, label = "throw new Exception(msg)@@@13@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
8 [style = filled, label = "clonedVm = dcMo.findVm(templateUniqueName)@@@27@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
16 [style = filled, label = "fileName.toLowerCase().startsWith(templateUniqueName) && fileName.toLowerCase().endsWith(\".vmdk\")@@@35@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
24 [style = filled, label = "String fileName = file.getName()@@@34@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
59 [style = filled, label = "VmwareContext context@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
65 [style = filled, label = "handleMetadataCreateTemplateFromSnapshot['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
9 [style = filled, label = "Script command = new Script(false,\"mkdir\",_timeout,s_logger)@@@6@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
56 [style = filled, label = "String installPath@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
44 [style = filled, label = "processor.configure(\"OVA Processor\",params)@@@45@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
72 [style = filled, label = "postCreatePrivateTemplate(installFullPath,templateId,templateUniqueName,physicalSize,virtualSize)@@@9@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
5 [style = filled, label = "writeMetaOvaForTemplate(installFullPath,templateUniqueName + \".ovf\",templateVMDKName,templateUniqueName,physicalSize)@@@48@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
21 [style = filled, label = "params.put(StorageLayer.InstanceConfigKey,_storage)@@@44@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
23 [style = filled, label = "String result = command.execute()@@@9@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
48 [style = filled, label = "volumeDeviceInfo == null@@@19@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
57 [style = filled, label = "VirtualMachineMO vmMo@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
62 [style = filled, label = "VmwareHypervisorHost hyperHost@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
63 [style = filled, label = "long physicalSize = new File(installFullPath + \"/\" + templateVMDKName).length()@@@3@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
73 [style = filled, label = "String templateUniqueName@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
30 [style = filled, label = "createTemplateFromVolume['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
0 [style = filled, label = "command.add(installFullPath)@@@8@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
69 [style = filled, label = "String installFullPath@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
7 [style = filled, label = "String volumePath@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
46 [style = filled, label = "long physicalSize = new File(installFullPath + \"/\" + templateVMDKName).length()@@@41@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
4 [style = filled, label = "templateVMDKName += fileName@@@36@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
68 [style = filled, label = "Map<String,Object> params = new HashMap<>()@@@5@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
41 [style = filled, label = "files != null@@@32@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
43 [style = filled, label = "vmMo.createFullCloneWithSpecificDisk(templateUniqueName,dcMo.getVmFolder(),morPool,VmwareHelper.getDiskDeviceDatastore(volumeDeviceInfo.first()),volumeDeviceInfo)@@@26@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
64 [style = filled, label = "OVAProcessor processor = new OVAProcessor()@@@4@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
22 [style = filled, label = "long virtualSize = processor.getTemplateVirtualSize(installFullPath,templateUniqueName)@@@46@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
39 [style = filled, label = "VirtualMachineMO clonedVm = null@@@16@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
12 [style = filled, label = "installPath.intern()@@@5@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
40 [style = filled, label = "Pair<VirtualDisk,String> volumeDeviceInfo = vmMo.getDiskDevice(volumePath)@@@18@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
49 [style = filled, label = "clonedVm.tagAsWorkerVM()@@@28@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
51 [style = filled, label = "s_logger.error(msg)@@@12@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
26 [style = filled, label = "VmwareContext context@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
32 [style = filled, label = "String secStorageUrl@@@2@@@['1', '0', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
34 [style = filled, label = "String msg = \"Unable to find related disk device for volume. volume path: \" + volumePath@@@20@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
36 [style = filled, label = "result != null@@@10@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
58 [style = filled, label = "String workerVmName@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
66 [style = filled, label = "String ovfFilename@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
15 [style = filled, label = "s_logger.error(msg)@@@21@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
47 [style = filled, label = "String msg = \"unable to prepare template directory: \" + installPath + \", storage: \" + secStorageUrl + \", error msg: \" + result@@@11@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
35 [style = filled, label = "postCreatePrivateTemplate(installFullPath,templateId,templateUniqueName,physicalSize,virtualSize)@@@47@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
61 [style = filled, label = "long templateId@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
52 [style = filled, label = "String volumePath@@@2@@@['0', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB2BBB"];
19 [style = filled, label = "String templateVMDKName = \"\"@@@30@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
3 [style = filled, label = "command.add(\"-p\")@@@7@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
67 [style = filled, label = "params.put(StorageLayer.InstanceConfigKey,_storage)@@@6@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
32->47 [style = solid, label="secStorageUrl"];
65->66 [style = dotted, label="true"];
41->14 [style = dotted, label="true"];
23->47 [style = solid, label="result"];
15->1 [style = bold, label=""];
70->76 [style = bold, label=""];
48->15 [style = dotted, label="true"];
60->47 [style = solid, label="secStorageUrl"];
63->70 [style = solid, label="physicalSize"];
22->35 [style = bold, label=""];
6->19 [style = bold, label=""];
66->70 [style = solid, label="ovfFilename"];
47->51 [style = bold, label=""];
0->23 [style = bold, label=""];
26->2 [style = solid, label="context"];
55->50 [style = dotted, label="true"];
8->33 [style = solid, label="clonedVm"];
13->37 [style = bold, label=""];
29->22 [style = solid, label="installFullPath"];
47->42 [style = solid, label="msg"];
29->35 [style = solid, label="installFullPath"];
30->31 [style = dotted, label="true"];
36->47 [style = bold, label=""];
36->51 [style = dotted, label="true"];
41->53 [style = dotted, label="true"];
48->34 [style = bold, label=""];
69->74 [style = solid, label="installFullPath"];
29->12 [style = bold, label=""];
31->6 [style = solid, label="templateUniqueName"];
73->74 [style = solid, label="templateUniqueName"];
63->64 [style = bold, label=""];
54->28 [style = solid, label="nfsVersion"];
27->35 [style = solid, label="templateId"];
32->28 [style = solid, label="secStorageUrl"];
63->76 [style = solid, label="physicalSize"];
2->38 [style = bold, label=""];
21->44 [style = bold, label=""];
1->2 [style = bold, label=""];
48->34 [style = dotted, label="true"];
10->47 [style = solid, label="installPath"];
28->29 [style = bold, label=""];
41->46 [style = bold, label=""];
50->22 [style = solid, label="templateUniqueName"];
60->28 [style = solid, label="secStorageUrl"];
75->72 [style = solid, label="templateId"];
34->15 [style = bold, label=""];
34->15 [style = solid, label="msg"];
16->4 [style = bold, label=""];
36->47 [style = dotted, label="true"];
41->24 [style = bold, label=""];
30->10 [style = dotted, label="true"];
30->17 [style = dotted, label="true"];
64->68 [style = bold, label=""];
34->1 [style = solid, label="msg"];
51->42 [style = bold, label=""];
25->33 [style = bold, label=""];
20->41 [style = solid, label="files"];
40->48 [style = solid, label="volumeDeviceInfo"];
73->70 [style = solid, label="templateUniqueName"];
25->76 [style = dashed, label="0"];
38->43 [style = bold, label=""];
30->32 [style = dotted, label="true"];
10->29 [style = solid, label="installPath"];
23->36 [style = solid, label="result"];
12->9 [style = bold, label=""];
55->57 [style = dotted, label="true"];
55->28 [style = bold, label=""];
35->5 [style = bold, label=""];
29->0 [style = solid, label="installFullPath"];
37->21 [style = bold, label=""];
30->18 [style = dotted, label="true"];
55->52 [style = dotted, label="true"];
40->48 [style = bold, label=""];
30->26 [style = dotted, label="true"];
50->16 [style = solid, label="templateUniqueName"];
59->2 [style = solid, label="context"];
30->28 [style = bold, label=""];
65->77 [style = dotted, label="true"];
28->6 [style = solid, label="secondaryMountPoint"];
65->75 [style = dotted, label="true"];
8->49 [style = bold, label=""];
41->24 [style = dotted, label="true"];
38->43 [style = solid, label="morPool"];
37->44 [style = solid, label="params"];
67->71 [style = bold, label=""];
7->40 [style = solid, label="volumePath"];
65->63 [style = bold, label=""];
77->70 [style = solid, label="templateVMDKName"];
36->42 [style = dotted, label="true"];
50->35 [style = solid, label="templateUniqueName"];
50->5 [style = solid, label="templateUniqueName"];
55->60 [style = dotted, label="true"];
50->6 [style = solid, label="templateUniqueName"];
49->6 [style = bold, label=""];
40->43 [style = solid, label="volumeDeviceInfo"];
12->0 [style = dotted, label="true"];
71->74 [style = bold, label=""];
56->29 [style = solid, label="installPath"];
55->54 [style = dotted, label="true"];
16->46 [style = bold, label=""];
68->67 [style = bold, label=""];
31->16 [style = solid, label="templateUniqueName"];
46->5 [style = solid, label="physicalSize"];
22->35 [style = solid, label="virtualSize"];
10->25 [style = solid, label="installPath"];
7->34 [style = solid, label="volumePath"];
12->9 [style = dotted, label="true"];
24->16 [style = bold, label=""];
65->69 [style = dotted, label="true"];
52->40 [style = solid, label="volumePath"];
30->7 [style = dotted, label="true"];
50->25 [style = solid, label="templateUniqueName"];
50->43 [style = solid, label="templateUniqueName"];
4->46 [style = bold, label=""];
63->72 [style = solid, label="physicalSize"];
61->35 [style = solid, label="templateId"];
48->2 [style = bold, label=""];
17->28 [style = solid, label="nfsVersion"];
43->8 [style = bold, label=""];
74->76 [style = solid, label="virtualSize"];
12->36 [style = dotted, label="true"];
73->72 [style = solid, label="templateUniqueName"];
47->51 [style = solid, label="msg"];
5->70 [style = dashed, label="0"];
42->39 [style = bold, label=""];
46->13 [style = bold, label=""];
16->4 [style = dotted, label="true"];
19->5 [style = solid, label="templateVMDKName"];
16->24 [style = bold, label=""];
31->25 [style = solid, label="templateUniqueName"];
52->34 [style = solid, label="volumePath"];
31->5 [style = solid, label="templateUniqueName"];
31->35 [style = solid, label="templateUniqueName"];
28->29 [style = solid, label="secondaryMountPoint"];
48->1 [style = dotted, label="true"];
12->23 [style = dotted, label="true"];
55->56 [style = dotted, label="true"];
74->72 [style = solid, label="virtualSize"];
30->27 [style = dotted, label="true"];
19->20 [style = bold, label=""];
55->62 [style = dotted, label="true"];
31->43 [style = solid, label="templateUniqueName"];
29->5 [style = solid, label="installFullPath"];
9->3 [style = bold, label=""];
56->47 [style = solid, label="installPath"];
31->22 [style = solid, label="templateUniqueName"];
41->11 [style = dotted, label="true"];
65->73 [style = dotted, label="true"];
10->6 [style = solid, label="installPath"];
24->4 [style = solid, label="fileName"];
22->25 [style = solid, label="virtualSize"];
31->8 [style = solid, label="templateUniqueName"];
56->6 [style = solid, label="installPath"];
55->58 [style = dotted, label="true"];
55->59 [style = dotted, label="true"];
55->61 [style = dotted, label="true"];
46->35 [style = solid, label="physicalSize"];
56->25 [style = solid, label="installPath"];
69->72 [style = solid, label="installFullPath"];
68->71 [style = solid, label="params"];
5->25 [style = bold, label=""];
3->0 [style = bold, label=""];
23->36 [style = bold, label=""];
72->70 [style = bold, label=""];
4->5 [style = solid, label="templateVMDKName"];
30->45 [style = dotted, label="true"];
39->40 [style = bold, label=""];
74->72 [style = bold, label=""];
46->25 [style = solid, label="physicalSize"];
41->16 [style = dotted, label="true"];
36->39 [style = bold, label=""];
44->22 [style = bold, label=""];
30->50 [style = dotted, label="true"];
12->3 [style = dotted, label="true"];
69->70 [style = solid, label="installFullPath"];
50->8 [style = solid, label="templateUniqueName"];
20->41 [style = bold, label=""];
}
