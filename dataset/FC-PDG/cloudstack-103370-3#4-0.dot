digraph {
51 [style = filled, label = "rbd.close(image)@@@48@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
47 [style = filled, label = "return new CreateObjectAnswer(newSnapshot)@@@73@@@['1', '0', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB1BBB"];
54 [style = filled, label = "final String vmName = volume.getVmName()@@@7@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
4 [style = filled, label = "vm.snapshotCreateXML(snapshot)@@@30@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
79 [style = filled, label = "return new CopyCmdAnswer(\"unsupported protocol\")@@@8@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
53 [style = filled, label = "final Connect conn = LibvirtConnection.getConnectionByVmName(vmName)@@@9@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
63 [style = filled, label = "image.snapCreate(snapshotName)@@@47@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
37 [style = filled, label = "final SnapshotObjectTO newSnapshot = new SnapshotObjectTO()@@@71@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
9 [style = filled, label = "final long start = System.currentTimeMillis()@@@29@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
43 [style = filled, label = "s_logger.trace(\"Ignoring libvirt error.\",e)@@@18@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
0 [style = filled, label = "result != null@@@65@@@['1', '0', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
2 [style = filled, label = "final Object(( args = new Object((((edu.fdu.CPPDG.tinypdg.pe.ExpressionInfo@7a18fc@@@25@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
50 [style = filled, label = "state = vm.getInfo().state@@@34@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
14 [style = filled, label = "final KVMStoragePool primaryPool = storagePoolMgr.getStoragePool(primaryStore.getPoolType(),primaryStore.getUuid())@@@21@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
61 [style = filled, label = "return new CreateObjectAnswer(newSnapshot)@@@68@@@['0', '1', '0']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB2BBB"];
62 [style = filled, label = "s_logger.debug(\"Attempting to create RBD snapshot \" + disk.getName() + \"@\" + snapshotName)@@@46@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
34 [style = filled, label = "final String vmUuid = vm.getUUIDString()@@@24@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
23 [style = filled, label = "newSnapshot.setPath(disk.getPath() + File.separator + snapshotName)@@@72@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
31 [style = filled, label = "vmName != null@@@12@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
6 [style = filled, label = "r.confSet(\"mon_host\",primaryPool.getSourceHost() + \":\" + primaryPool.getSourcePort())@@@43@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
39 [style = filled, label = "final RbdImage image = rbd.open(disk.getName())@@@50@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
13 [style = filled, label = "final SnapshotObjectTO newSnapshot = new SnapshotObjectTO()@@@66@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
71 [style = filled, label = "CopyCommand cmd@@@2@@@['0', '0', '1']", fillcolor = tomato, shape = box image = "AAA0AAABBB3BBB"];
32 [style = filled, label = "DomainInfo.DomainState state = null@@@10@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
10 [style = filled, label = "newSnapshot.setPath(disk.getPath() + File.separator + snapshotName)@@@67@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
26 [style = filled, label = "final CreateObjectCommand cmd@@@2@@@['1', '1', '0']", fillcolor = tomato, shape = box image = "AAA0AAABBB1BBB"];
38 [style = filled, label = "vm.resume()@@@36@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
73 [style = filled, label = "SnapshotObjectTO newSnapshot = new SnapshotObjectTO()@@@13@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
25 [style = filled, label = "final LibvirtException e@@@17@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
36 [style = filled, label = "r.ioCtxDestroy(io)@@@54@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
74 [style = filled, label = "return new CopyCmdAnswer(newSnapshot)@@@15@@@['0', '0', '1']", fillcolor = lightgray, shape = ellipse image = "AAA0AAABBB3BBB"];
75 [style = filled, label = "SnapshotObjectTO snapshot = (SnapshotObjectTO)srcData@@@5@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
5 [style = filled, label = "final KVMPhysicalDisk disk = storagePoolMgr.getPhysicalDisk(primaryStore.getPoolType(),primaryStore.getUuid(),volume.getPath())@@@22@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
7 [style = filled, label = "state == DomainInfo.DomainState.VIR_DOMAIN_PAUSED@@@35@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
80 [style = filled, label = "backupSnapshot['0', '0', '1']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB3BBB"];
57 [style = filled, label = "command.add(NAME_OPTION,snapshotName)@@@58@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
12 [style = filled, label = "command.add(\"-c\",disk.getPath())@@@62@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
77 [style = filled, label = "int index = snapshot.getPath().lastIndexOf(\"/\")@@@10@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
11 [style = filled, label = "command.add(MANAGE_SNAPSTHOT_CREATE_OPTION,disk.getPath())@@@57@@@['1', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
76 [style = filled, label = "String snapshotRelPath = \"snapshots\"@@@12@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
20 [style = filled, label = "r.confSet(\"key\",primaryPool.getAuthSecret())@@@44@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
65 [style = filled, label = "createSnapshot['0', '1', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB2BBB"];
40 [style = filled, label = "command.add(\"-n\",snapshotName)@@@63@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
44 [style = filled, label = "final PrimaryDataStoreTO primaryStore = (PrimaryDataStoreTO)snapshotTO.getDataStore()@@@4@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
8 [style = filled, label = "r.ioCtxDestroy(io)@@@49@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
1 [style = filled, label = "final SnapshotObjectTO snapshotTO = (SnapshotObjectTO)cmd.getData()@@@3@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
59 [style = filled, label = "result != null@@@60@@@['0', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB2BBB"];
66 [style = filled, label = "return new CreateObjectAnswer(\"Failed to manage snapshot: \" + result)@@@62@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
27 [style = filled, label = "Domain vm = null@@@11@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
33 [style = filled, label = "r.confSet(\"client_mount_timeout\",\"30\")@@@45@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
46 [style = filled, label = "s_logger.debug(\"snapshot takes \" + total + \" seconds to finish\")@@@32@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
35 [style = filled, label = "vm = resource.getDomain(conn,vmName)@@@33@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
55 [style = filled, label = "Rados r = radosConnect(primaryPool)@@@42@@@['0', '1', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB2BBB"];
69 [style = filled, label = "DataTO srcData = cmd.getSrcTO()@@@3@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
64 [style = filled, label = "final IoCTX io = r.ioCtxCreate(primaryPool.getSourceDir())@@@43@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
70 [style = filled, label = "newSnapshot.setPath(snapshotRelPath + File.separator + snapshotName)@@@14@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
18 [style = filled, label = "final Rados r = new Rados(primaryPool.getAuthUserName())@@@42@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
15 [style = filled, label = "final String snapshot = SnapshotXML.format(args)@@@28@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
52 [style = filled, label = "final Exception e@@@51@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
72 [style = filled, label = "String snapshotName = snapshot.getPath().substring(index + 1)@@@11@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
19 [style = filled, label = "final Script command = new Script(_manageSnapshotPath,_cmdsTimeout,s_logger)@@@56@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
41 [style = filled, label = "primaryPool.getType() == StoragePoolType.RBD@@@40@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
45 [style = filled, label = "s_logger.debug(\"Succesfully connected to Ceph cluster at \" + r.confGet(\"mon_host\"))@@@47@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
78 [style = filled, label = "DataStoreTO imageStore = destData.getDataStore()@@@6@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
49 [style = filled, label = "final String result = command.execute()@@@64@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
17 [style = filled, label = "s_logger.debug(\"Failed to manage snapshot: \" + result)@@@61@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
3 [style = filled, label = "final long total = (System.currentTimeMillis() - start) / 1000@@@31@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
21 [style = filled, label = "rbd.close(image)@@@53@@@['1', '0', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
67 [style = filled, label = "!(imageStore instanceof NfsTO)@@@7@@@['0', '0', '1']", fillcolor = white, shape = diamond image = "AAA0AAABBB3BBB"];
24 [style = filled, label = "vm = resource.getDomain(conn,vmName)@@@14@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
30 [style = filled, label = "final VolumeObjectTO volume = snapshotTO.getVolume()@@@5@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
68 [style = filled, label = "DataTO destData = cmd.getDestTO()@@@4@@@['0', '0', '1']", fillcolor = white, shape = ellipse image = "AAA0AAABBB3BBB"];
56 [style = filled, label = "final String result = command.execute()@@@59@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
28 [style = filled, label = "state = vm.getInfo().state@@@15@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
16 [style = filled, label = "createSnapshot['1', '0', '0']", fillcolor = lightgray, shape = diamond image = "AAA0AAABBB1BBB"];
42 [style = filled, label = "final String snapshotName = UUID.randomUUID().toString()@@@6@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
60 [style = filled, label = "final RbdImage image = rbd.open(disk.getName())@@@45@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
48 [style = filled, label = "r.connect()@@@46@@@['1', '0', '0']", fillcolor = red, shape = ellipse image = "AAA1AAABBB1BBB"];
58 [style = filled, label = "final Rbd rbd = new Rbd(io)@@@44@@@['0', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB2BBB"];
29 [style = filled, label = "state == DomainInfo.DomainState.VIR_DOMAIN_RUNNING && !primaryPool.isExternalSnapshot()@@@23@@@['1', '1', '0']", fillcolor = white, shape = diamond image = "AAA0AAABBB1BBB"];
22 [style = filled, label = "s_logger.error(\"A RBD snapshot operation on \" + disk.getName() + \" failed. The error was: \" + e.getMessage())@@@52@@@['1', '1', '0']", fillcolor = white, shape = ellipse image = "AAA0AAABBB1BBB"];
29->9 [style = dotted, label="true"];
40->49 [style = bold, label=""];
29->2 [style = dotted, label="true"];
80->71 [style = dotted, label="true"];
0->13 [style = bold, label=""];
41->19 [style = bold, label=""];
67->79 [style = dotted, label="true"];
37->47 [style = solid, label="newSnapshot"];
9->3 [style = solid, label="start"];
49->0 [style = solid, label="result"];
51->36 [style = solid, label="io"];
58->60 [style = bold, label=""];
25->43 [style = bold, label=""];
19->11 [style = bold, label=""];
39->21 [style = solid, label="image"];
49->0 [style = bold, label=""];
29->34 [style = bold, label=""];
69->68 [style = bold, label=""];
56->66 [style = solid, label="result"];
41->12 [style = dotted, label="false"];
18->55 [style = dashed, label="0"];
28->14 [style = bold, label=""];
41->36 [style = dotted, label="true"];
12->40 [style = bold, label=""];
76->73 [style = bold, label=""];
52->22 [style = dotted, label="true"];
42->22 [style = solid, label="snapshotName"];
21->36 [style = bold, label=""];
42->62 [style = solid, label="snapshotName"];
34->2 [style = bold, label=""];
35->50 [style = bold, label=""];
31->28 [style = dotted, label="true"];
41->58 [style = dotted, label="true"];
19->11 [style = dotted, label="true"];
41->59 [style = dotted, label="false"];
53->32 [style = bold, label=""];
2->15 [style = bold, label=""];
33->48 [style = bold, label=""];
41->51 [style = dotted, label="true"];
54->53 [style = bold, label=""];
28->29 [style = solid, label="state"];
41->57 [style = dotted, label="false"];
41->33 [style = dotted, label="true"];
70->74 [style = bold, label=""];
55->64 [style = bold, label=""];
8->39 [style = bold, label=""];
75->78 [style = bold, label=""];
22->13 [style = bold, label=""];
41->49 [style = dotted, label="false"];
41->21 [style = dotted, label="true"];
41->62 [style = dotted, label="true"];
31->14 [style = bold, label=""];
5->29 [style = bold, label=""];
24->28 [style = bold, label=""];
4->3 [style = bold, label=""];
3->46 [style = bold, label=""];
42->40 [style = solid, label="snapshotName"];
66->13 [style = bold, label=""];
10->61 [style = bold, label=""];
1->44 [style = bold, label=""];
63->51 [style = bold, label=""];
0->10 [style = dotted, label="true"];
41->60 [style = dotted, label="true"];
54->35 [style = solid, label="vmName"];
41->19 [style = dotted, label="false"];
30->42 [style = bold, label=""];
42->10 [style = solid, label="snapshotName"];
60->62 [style = bold, label=""];
7->37 [style = bold, label=""];
41->17 [style = dotted, label="false"];
11->37 [style = bold, label=""];
27->31 [style = bold, label=""];
53->24 [style = solid, label="conn"];
76->70 [style = solid, label="snapshotRelPath"];
56->59 [style = solid, label="result"];
54->24 [style = solid, label="vmName"];
51->8 [style = solid, label="io"];
41->48 [style = dotted, label="true"];
59->66 [style = dotted, label="true"];
12->11 [style = dashed, label="0"];
39->52 [style = bold, label=""];
17->66 [style = bold, label=""];
49->10 [style = solid, label="result"];
38->37 [style = bold, label=""];
65->26 [style = dotted, label="true"];
15->9 [style = bold, label=""];
29->50 [style = dotted, label="true"];
34->2 [style = solid, label="vmUuid"];
41->56 [style = dotted, label="false"];
41->64 [style = dotted, label="true"];
49->13 [style = solid, label="result"];
41->40 [style = dotted, label="false"];
41->11 [style = dotted, label="false"];
36->37 [style = bold, label=""];
11->57 [style = bold, label=""];
65->1 [style = bold, label=""];
13->61 [style = solid, label="newSnapshot"];
32->50 [style = solid, label="state"];
44->30 [style = bold, label=""];
13->10 [style = bold, label=""];
29->4 [style = dotted, label="true"];
67->77 [style = bold, label=""];
56->17 [style = solid, label="result"];
41->63 [style = dotted, label="true"];
29->34 [style = dotted, label="true"];
45->51 [style = bold, label=""];
31->24 [style = bold, label=""];
29->7 [style = dotted, label="true"];
64->58 [style = solid, label="io"];
53->35 [style = solid, label="conn"];
32->27 [style = bold, label=""];
72->70 [style = solid, label="snapshotName"];
2->15 [style = solid, label="args"];
73->70 [style = bold, label=""];
52->22 [style = bold, label=""];
42->2 [style = solid, label="snapshotName"];
28->50 [style = solid, label="state"];
26->71 [style = dashed, label="0"];
6->20 [style = bold, label=""];
42->52 [style = solid, label="snapshotName"];
50->7 [style = solid, label="state"];
14->55 [style = solid, label="primaryPool"];
3->46 [style = solid, label="total"];
17->12 [style = bold, label=""];
60->51 [style = solid, label="image"];
41->0 [style = dotted, label="false"];
43->14 [style = bold, label=""];
18->6 [style = bold, label=""];
16->1 [style = bold, label=""];
42->23 [style = solid, label="snapshotName"];
15->4 [style = solid, label="snapshot"];
40->57 [style = dashed, label="0"];
46->35 [style = bold, label=""];
23->47 [style = bold, label=""];
41->55 [style = dotted, label="true"];
25->43 [style = dotted, label="true"];
41->8 [style = dotted, label="true"];
42->63 [style = solid, label="snapshotName"];
51->8 [style = bold, label=""];
67->79 [style = bold, label=""];
64->58 [style = bold, label=""];
54->31 [style = solid, label="vmName"];
41->52 [style = dotted, label="true"];
56->59 [style = bold, label=""];
41->18 [style = bold, label=""];
29->3 [style = dotted, label="true"];
59->17 [style = dotted, label="true"];
8->13 [style = bold, label=""];
29->41 [style = dotted, label="false"];
10->37 [style = bold, label=""];
59->17 [style = bold, label=""];
14->5 [style = bold, label=""];
7->13 [style = bold, label=""];
32->28 [style = solid, label="state"];
69->75 [style = solid, label="srcData"];
41->22 [style = dotted, label="true"];
0->13 [style = dotted, label="true"];
0->37 [style = bold, label=""];
41->55 [style = bold, label=""];
41->6 [style = dotted, label="true"];
29->41 [style = bold, label=""];
9->4 [style = bold, label=""];
62->63 [style = bold, label=""];
22->21 [style = bold, label=""];
41->18 [style = dotted, label="true"];
50->7 [style = bold, label=""];
32->29 [style = solid, label="state"];
41->39 [style = dotted, label="true"];
77->72 [style = bold, label=""];
37->23 [style = bold, label=""];
29->15 [style = dotted, label="true"];
7->38 [style = dotted, label="true"];
41->45 [style = dotted, label="true"];
72->76 [style = bold, label=""];
20->33 [style = bold, label=""];
79->77 [style = bold, label=""];
41->20 [style = dotted, label="true"];
16->26 [style = dotted, label="true"];
29->46 [style = dotted, label="true"];
57->56 [style = bold, label=""];
7->38 [style = bold, label=""];
41->17 [style = bold, label=""];
48->45 [style = bold, label=""];
73->74 [style = solid, label="newSnapshot"];
77->72 [style = solid, label="index"];
78->67 [style = bold, label=""];
59->13 [style = bold, label=""];
68->75 [style = bold, label=""];
54->53 [style = solid, label="vmName"];
80->69 [style = bold, label=""];
31->24 [style = dotted, label="true"];
42->54 [style = bold, label=""];
38->13 [style = bold, label=""];
29->35 [style = dotted, label="true"];
42->57 [style = solid, label="snapshotName"];
64->8 [style = solid, label="io"];
}
